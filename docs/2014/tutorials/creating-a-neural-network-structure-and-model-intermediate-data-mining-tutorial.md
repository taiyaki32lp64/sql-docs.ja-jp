---
title: ニューラル ネットワーク構造およびモデル (中級者向けデータ マイニング チュートリアル) の作成 |Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- discretization [Analysis Services]
- DISCRETIZED column
- DiscretizationBuckets property
- DiscretizationMethod property
- EQUAL_AREAS method
ms.assetid: 3f16215c-531e-4ecf-a11f-ee7c6a764463
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 6787db165770f944838a312ecd3e0386d161da38
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "62856324"
---
# <a name="creating-a-neural-network-structure-and-model-intermediate-data-mining-tutorial"></a>ニューラル ネットワーク構造およびモデルの作成 (中級者向けデータ マイニング チュートリアル)
  データ マイニング モデルを作成するには、まずデータ マイニング ウィザードを使用して、新しいデータ ソース ビューに基づく新しいマイニング構造を作成する必要があります。 ここでは、ウィザードを使用してマイニング構造を作成し、同時に、[!INCLUDE[msCoName](../includes/msconame-md.md)] ニューラル ネットワーク アルゴリズムに基づく関連マイニング モデルを作成します。  
  
 ニューラル ネットワークは高い柔軟性を持ち、さまざまな入力と出力の組み合わせを分析できるため、最良の結果を得るためにはいくつかのデータ処理方法を試す必要があります。 サービスの品質の数値目標のある方法をカスタマイズする例:*ビン分割*、または特定のビジネス要件の対象に、グループ化します。 そのためには、数値データを別の方法でグループ化する新しい列をマイニング構造に追加して、その新しい列を使用するモデルを作成します。 その後、それらのマイニング モデルを使用して探索を行います。  
  
 実務上の目的に最も大きい影響を与える要因がニューラル ネットワーク モデルからわかったら、最後に、予測およびスコアリングのための別のモデルを作成します。 そのためには、[!INCLUDE[msCoName](../includes/msconame-md.md)] ロジスティック回帰アルゴリズムを使用します。このアルゴリズムは、ニューラル ネットワーク モデルが基になっていますが、特定の入力に基づくソリューションの検索用に最適化されています。  
  
 **手順**  
  
 [既定のマイニング構造とモデルを作成します。](#bkmk_defaul)  
  
 [分離を使用して、予測可能列をビン分割するには](#bkmk_ColumnCopy)  
  
 [列をコピーし、別のモデルの分離メソッドを変更します。](#bkmk_Alias)  
  
 [モデルを比較できるように、予測可能列の別名を作成します。](#bkmk_Alias2)  
  
 [すべてのモデルを処理します。](#bkmk_SeedProcess)  
  
## 既定のコール センター構造を作成します。  <a name="bkmk_defaul"></a>  
  
1.  ソリューション エクスプ ローラーで[!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)]を右クリックして**マイニング構造**選択**新しいマイニング構造の**します。  
  
2.  **[データ マイニング ウィザードへようこそ]** ページで **[次へ]** をクリックします。  
  
3.  **定義方法の選択**ことを確認します ページで、**既存のリレーショナル データベースまたはデータ ウェアハウスから**が選択されているし、をクリックし、 **次へ**します。  
  
4.  **データ マイニング構造の作成**ことを確認します ページで、オプション**マイニング モデルをマイニング構造を作成**が選択されています。  
  
5.  オプションのドロップダウン リストをクリックします。**を使用するデータ マイニング技法を指定しますか?** を選択し、 **Microsoft ニューラル ネットワーク**します。  
  
     ロジスティック回帰モデルはニューラル ネットワークに基づくため、同じ構造を再利用して新しいマイニング モデルを追加できます。  
  
6.  **[次へ]** をクリックします。  
  
     **データ ソース ビューの選択**ページが表示されます。  
  
7.  [**使用可能なデータ ソース ビュー**を選択します`Call Center`、] をクリック**次**します。  
  
8.  **テーブルの種類の指定** ページで、、**ケース** の隣にチェック ボックス、 **FactCallCenter**テーブル。 に対しては何も選択しないでください**DimDate**します。 **[次へ]** をクリックします。  
  
9. **トレーニング データの指定**] ページで、[**キー**列の横にある**FactCallCenterID します。**  
  
10. 選択、`Predict`と**入力**チェック ボックス。  
  
11. 選択、**キー**、**入力**と`Predict`チェック ボックスを次の表に示すようにします。  
  
    |テーブルまたは列|[キー]/[入力]/[予測]|  
    |---------------------|-------------------------|  
    |AutomaticResponses|入力|  
    |AverageTimePerIssue|[入力]/[予測]|  
    |Calls|入力|  
    |DateKey|使用しない|  
    |DayOfWeek|入力|  
    |FactCallCenterID|キー|  
    |IssuesRaised|入力|  
    |LevelOneOperators|[入力]/[予測]|  
    |LevelTwoOperators|入力|  
    |Orders|[入力]/[予測]|  
    |ServiceGrade|[入力]/[予測]|  
    |Shift|入力|  
    |TotalOperators|使用しない|  
    |WageType|入力|  
  
     予測可能列が複数選択されていることに注意してください。 ニューラル ネットワーク アルゴリズムには、入力属性と出力属性のあらゆる組み合わせを分析できるという利点があります。 処理時間を指数関数的に増える可能性がありますは、この大規模なデータ セットに対して行う必要はありません.  
  
12. **指定列のコンテンツおよびデータ型** ページで、グリッドには、列、コンテンツの種類、および次の表に示すように、データ型が含まれていることを確認してをクリックし、**次**します。  
  
    |[列]|コンテンツの種類|データ型|  
    |-------------|------------------|----------------|  
    |AutomaticResponses|Continuous|Long|  
    |AverageTimePerIssue|Continuous|Long|  
    |Calls|Continuous|Long|  
    |DayOfWeek|Discrete|テキスト|  
    |FactCallCenterID|キー|Long|  
    |IssuesRaised|Continuous|Long|  
    |LevelOneOperators|Continuous|Long|  
    |LevelTwoOperators|Continuous|Long|  
    |Orders|Continuous|Long|  
    |ServiceGrade|Continuous|Double|  
    |Shift|Discrete|テキスト|  
    |WageType|Discrete|テキスト|  
  
13. **テストの設定を作成** ページで、オプションのテキスト ボックスをオフ**テスト用データの割合**します。 **[次へ]** をクリックします。  
  
14. **ウィザードの完了** ページの**マイニング構造名**、型`Call Center`します。  
  
15. **マイニング モデル名**、型`Call Center Default NN`、 をクリックし、**完了**します。  
  
     **ドリルスルーを許可する**ニューラル ネットワーク モデルを使用したデータにドリルスルーすることはできませんので、ボックスは無効になります。  
  
16. ソリューション エクスプローラで、名前を右クリックしたデータ マイニング構造の作成、および選択**プロセス**します。  
  
## <a name="use-discretization-to-bin-the-target-column"></a>分離を使用して対象列をビン分割する  
 既定では、予測可能な数値属性を持つニューラル ネットワーク モデルを作成したとき、Microsoft ニューラル ネットワーク アルゴリズムではその属性は連続する数値として扱われます。 たとえば、ServiceGrade 属性は、理論上は 0.00 (すべての電話に応答している状態) ～ 1.00 (すべての発信元が電話を切っている状態) の範囲の数値です。 このデータセットにおいて、数値の分布は次のようになります。  
  
 ![サービス グレード値の分布](../../2014/tutorials/media/skt-service-grade-valuesc.gif "サービス グレード値の分布")  
  
 その結果、モデルを処理したときに、その出力が期待どおりにグループ化されないことがあります。 たとえば、値の最適なグループを識別するためにクラスタ リングを使用する場合、アルゴリズムによってような範囲に ServiceGrade の値が分かれています。0.0748051948 - 0.09716216215. この分類は数学的には正確ですが、このような範囲がビジネス ユーザーにとって有意なものではない場合もあります。  
  
 この手順より直感的な結果をグループ化します数値異なる方法で数値データ列のコピーを作成します。  
  
### <a name="how-discretization-works"></a>分離のしくみ  
 Analysis Services には、数値データのビン分割や処理のためのさまざまな方法が用意されています。 次の表は、出力属性 ServiceGrade を次の 3 とおりの方法で処理した場合の結果の違いを示しています。  
  
-   連続する数値として処理する。  
  
-   アルゴリズムでクラスタリングを使用して値の最適な分配を特定する。  
  
-   Equal Areas メソッドを使用して数値をビン分割することを指定する。  
  
 既定のモデル (連続)  
  
|Value|SUPPORT|  
|-----------|-------------|  
|Missing|0|  
|0.09875|120|  
  
 クラスタリングによるビン分割  
  
|Value|SUPPORT|  
|-----------|-------------|  
|\< 0.0748051948|34|  
|0.0748051948 - 0.09716216215|27|  
|0.09716216215 - 0.13297297295|39|  
|0.13297297295 - 0.167499999975|10|  
|>= 0.167499999975|10|  
  
 Equal Areas メソッドによるビン分割  
  
|Value|SUPPORT|  
|-----------|-------------|  
|\< 0.07|26|  
|0.07 - 0.00|22|  
|0.09 - 0.11|36|  
|>= 0.12|36|  
  
> [!NOTE]  
>  これらの統計は、すべてのデータが処理された後のモデルのマージナル統計ノードから取得できます。 マージナル統計ノードの詳細については、次を参照してください。[ニューラル ネットワーク モデルのマイニング モデル コンテンツ&#40;Analysis Services - データ マイニング&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-neural-network-models-analysis-services-data-mining.md)します。  
  
 この表の "値" 列には、ServiceGrade の数値がどのように処理されたかが示されています。 "サポート" 列には、その値またはその範囲に分類されたケースの数が示されています。  
  
-   **連続する数値 (既定値) の使用します。**  
  
     既定の方法を使用した場合、120 個の一意の値の結果が計算され、その平均値は 0.09875 になります。 また、不足値の数も確認できます。  
  
-   **クラスタ リングによるビン分割します。**  
  
     Microsoft クラスタリング アルゴリズムでオプションの値のグループを特定する場合、ServiceGrade の値が 5 つの範囲にグループ化されます。 "サポート" 列に示されているように、それぞれの範囲に分配されるケースの数は均等にはなりません。  
  
-   **等しい領域でビン分割します。**  
  
     この方法を選択した場合、等しいサイズのバケットに値が分配されてから、各範囲の上限と下限が変更されます。 バケットの数は指定できますが、それぞれのバケットに含まれる値の数が数個だけにならないようにしてください。  
  
 ビン分割オプションの詳細については、次を参照してください。[分離メソッド&#40;データ マイニング&#41;](../../2014/analysis-services/data-mining/discretization-methods-data-mining.md)します。  
  
 また、数値の値を使用するのではなくでした追加するなど、サービス グレードを定義済みの対象の範囲に分類する別の派生列**ベスト**(ServiceGrade \<= 0.05)、 **許容される**(0.10 > ServiceGrade > 0.05)、および**低下**(ServiceGrade > = 0.10)。  
  
###  <a name="bkmk_newColumn"></a> 列のコピーを作成し、分離メソッドを変更します。  
 ターゲット属性 (servicegrade) を含むマイニング列のコピーを作成し、数値を区切る方法を変更します。 予測可能な属性を含め、マイニング構造の任意の列の複数のコピーを作成することができます。  
  
 このチュートリアルでは、Equal Areas 分離メソッドを使用して、バケット数を 4 に指定します。 結果のグループ化は、ビジネス ユーザーの興味の対象となるターゲット値に非常に近いものになります。  
  
####  <a name="bkmk_ColumnCopy"></a> マイニング構造の列のカスタマイズされたコピーを作成するには  
  
1.  ソリューション エクスプローラーで、作成したマイニング構造をダブルクリックします。  
  
2.  マイニング構造 タブで、次のようにクリックします。**マイニング構造列の追加**します。  
  
3.  **Select 列**] ダイアログ ボックスの一覧から [ServiceGrade**基になる列**、順にクリックします **[ok]** します。  
  
     マイニング構造列の一覧に新しい列が追加されます。 新しいマイニング列の既定の名前は、元の列と同じ名前に数値の接尾辞を付けたものです (例 : ServiceGrade 1)。 この列の名前を、よりわかりやすい名前に変更します。  
  
     分離メソッドも指定します。  
  
4.  ServiceGrade 1 を右クリックして**プロパティ**します。  
  
5.  **プロパティ**ウィンドウで、検索、**名前**プロパティ名を変更して、 **Service Grade binned」** します。  
  
6.  関連するすべてのマイニング モデル列の名前を同じように変更するかどうかを確認するダイアログ ボックスが表示されます。 **[いいえ]** をクリックします。  
  
7.  **プロパティ**ウィンドウで、セクションを見つけます**データ型**必要に応じて展開します。  
  
8.  `Content` プロパティの値を `Continuous` から `Discretized` に変更します。  
  
     次のプロパティは、使用可能なようになりました。 次の表に従ってプロパティの値を変更します。  
  
    |プロパティ|既定値|新しい値|  
    |--------------|-------------------|---------------|  
    |`DiscretizationMethod`|`Continuous`|`EqualAreas`|  
    |`DiscretizationBucketCount`|値なし|4|  
  
    > [!NOTE]  
    >  <xref:Microsoft.AnalysisServices.ScalarMiningStructureColumn.DiscretizationBucketCount%2A> の既定値は実際は 0 です。これは、最適なバケット数がアルゴリズムによって自動的に決定されることを表します。 したがって、このプロパティの値を既定値に戻すには、「0」と入力します。  
  
9. データ マイニング デザイナーでクリックして、**マイニング モデル**タブ。  
  
     マイニング構造列のコピーを追加すると、そのコピーの使用法フラグが自動的に `Ignore` に設定されます。 マイニング構造に列のコピーを追加する場合、通常は、そのコピーを元の列と一緒に分析に使用することはありません。一緒に使用すると、アルゴリズムでその 2 つの列の間に強力な相関関係が検出されて、他の関係がわかりにくくなってしまう可能性があります。  
  
##  <a name="bkmk_NewModel"></a> 新しいマイニング モデルをマイニング構造に追加します。  
 対象となる属性の新しいグループ化を作成できたら、次に、その離散化列を使用する新しいマイニング モデルを追加する必要があります。 この手順が完了すると、CallCenter マイニング構造に次の 2 つのマイニング モデルが含まれるようになります。  
  
-   ServiceGrade 値を連続する範囲として処理するマイニング モデル Call Center Default NN  
  
-   Call Center Binned NN、等しいサイズの 4 つのバケットに分配、ServiceGrade 列の値をそのターゲット結果として使用する、新しいマイニング モデルを作成します。  
  
#### <a name="to-add-a-mining-model-based-on-the-new-discretized-column"></a>新しい離散化列に基づくマイニング モデルを追加するには  
  
1.  ソリューション エクスプ ローラーで右クリックしたマイニング構造を作成し、選択**オープン**します。  
  
2.  **[マイニング モデル]** タブをクリックします。  
  
3.  クリックして**関連マイニング モデル作成**です。  
  
4.  **マイニング モデルの新しい** ダイアログ ボックスの**モデル名**、型`Call Center Binned NN`します。 **アルゴリズム名**ドロップダウン リストで、 **Microsoft ニューラル ネットワーク**します。  
  
5.  新しいマイニング モデルに含まれる列の一覧で ServiceGrade を見つけて、使用法を `Predict` から `Ignore` に変更します。  
  
6.  同様に、ServiceGrade Binned を見つけて、使用法を `Ignore` から `Predict` に変更します。  
  
##  <a name="bkmk_Alias2"></a> ターゲット列に対して別名を作成します。  
 通常は、別の予測可能な属性を使用するマイニング モデルを比較することはできませんが、 マイニング モデル列の別名を作成することができるため、 つまり、元の列と同じ名前を持つように内の列、ServiceGrade Binned をマイニング モデルの名前を変更できます。 データが別の方法で分離されていても、この 2 つのモデルを精度チャートで直接比較することができます。  
  
###  <a name="bkmk_Alias"></a> マイニング モデルのマイニング構造列の別名を追加するには  
  
1.  **マイニング モデル**] タブの [**構造**、ServiceGrade Binned を選択します。  
  
     なお、**プロパティ**ウィンドウ、scalarminingstructurecolumn オブジェクトのプロパティを表示します。  
  
2.  マイニング モデル ServiceGrade Binned NN の列で、ServiceGrade Binned 列に対応するセルをクリックします。  
  
     今度、**プロパティ**ウィンドウに MiningModelColumn オブジェクトのプロパティを表示します。  
  
3.  検索、**名前**プロパティに値を変更し、`ServiceGrade`します。  
  
4.  検索、**説明**プロパティと型**Temporary column alias**します。  
  
     **プロパティ**ウィンドウは、次の情報を含める必要があります。  
  
    |プロパティ|値|  
    |--------------|-----------|  
    |**[説明]**|Temporary column alias|  
    |**ID**|ServiceGrade Binned|  
    |**モデリング フラグ**||  
    |**名前**|Service Grade|  
    |**SourceColumn ID**|Service Grade 1|  
    |**使用方法**|Predict|  
  
5.  内をクリックし、**マイニング モデルの**タブ。  
  
     グリッドが更新され、新しい一時列の別名を表示`ServiceGrade`列の使用法の横にあります。 マイニング構造と 2 つのマイニング モデルを含むグリッドは次のようになります。  
  
    |構造体|Call Center Default NN|Call Center Binned NN|  
    |---------------|----------------------------|---------------------------|  
    ||Microsoft ニューラル ネットワーク|Microsoft ニューラル ネットワーク|  
    |AutomaticResponses|入力|入力|  
    |AverageTimePerIssue|Predict|Predict|  
    |Calls|入力|入力|  
    |DayOfWeek|入力|入力|  
    |FactCallCenterID|キー|キー|  
    |IssuesRaised|入力|入力|  
    |LevelOneOperators|入力|入力|  
    |LevelTwoOperators|入力|入力|  
    |Orders|入力|入力|  
    |ServiceGrade Binned|Ignore|Predict (ServiceGrade)|  
    |ServiceGrade|Predict|Ignore|  
    |Shift|入力|入力|  
    |Total Operators|入力|入力|  
    |WageType|入力|入力|  
  
## <a name="process-all-models"></a>すべてのモデルを処理する  
 最後に、作成したモデルを簡単に比較できるように、既定のモデルとビン分割モデルのシード パラメーターを設定します。 シード値を設定すると、各モデルで同じポイントからデータの処理が開始されるようになります。  
  
> [!NOTE]  
>  シード パラメーターに数値を指定しなかった場合は、SQL Server Analysis Services により、モデルの名前に基づいてシードが生成されます。 モデルには必ず異なる名前が付けられるため、データが同じ順序で処理されるようにするにはシード値を設定する必要があります。  
  
###  <a name="bkmk_SeedProcess"></a> シードを指定して、モデルを処理するには  
  
1.  **マイニング モデルの** タブで、名前付き Call Center - LR、モデルの場合は、列を右クリックし、選択**アルゴリズム パラメーターの設定**します。  
  
2.  HOLDOUT_SEED パラメーターの行で、空のセルをクリックします。**値**、および種類`1`します。 **[OK]** をクリックします。 構造に関連付けられている各モデルに対してこの手順を繰り返します。  
  
    > [!NOTE]  
    >  関連するすべてのモデルで同じシードを使用する限り、シードとしてどのような値を選択するかは特に重要ではありません。  
  
3.  **マイニング モデル**メニューの **マイニング構造の処理とすべてのモデル**します。 クリックして**はい**サーバーに更新されたデータ マイニング プロジェクトを配置します。  
  
4.  **マイニング モデルの処理**ダイアログ ボックスで、をクリックして**実行**します。  
  
5.  をクリックして**閉じます**を閉じる、**処理の進行状況** ダイアログ ボックスをクリック**閉じます**で再度、**マイニング モデルの処理** ダイアログ ボックス。  
  
 関連する 2 つのマイニング モデルを作成できたので、データを探索してデータの関係を見つけることができます。  
  
## <a name="next-task-in-lesson"></a>このレッスンの次の作業  
 [コール センター モデルの検証&#40;中級者向けデータ マイニング チュートリアル&#41;](../../2014/tutorials/exploring-the-call-center-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>参照  
 [マイニング構造 (Analysis Services - データ マイニング)](../../2014/analysis-services/data-mining/mining-structures-analysis-services-data-mining.md)  
  
  
