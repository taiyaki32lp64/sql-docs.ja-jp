---
title: 予測 (中級者向けデータ マイニング チュートリアル) コール センター モデルの作成 |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 5be0cec7-f639-4eeb-835e-e3204ae619e9
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 30f24ab457669f572189d2eb13deca3f672f5e18
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "63217886"
---
# <a name="creating-predictions-for-the-call-center-models-intermediate-data-mining-tutorial"></a>コール センター モデルの予測の作成 (中級者向けデータ マイニング チュートリアル)
  シフト、オペレーターの数、電話、およびサービス グレードの間の相互作用について学習した後は、ビジネス分析および計画に使用できる予測クエリを作成します。 最初に、調査モデルに対していくつかの予測を作成していくつかの仮定をテストします。 次に、ロジスティック回帰モデルを使用して一括予測を作成します。  
  
 このレッスンでは、予測クエリの概念を理解していることを前提にしています。  
  
## <a name="creating-predictions-using-the-neural-network-model"></a>ニューラル ネットワーク モデルを使用した予測の作成  
 次の例では、探索用に作成されたニューラル ネットワーク モデルを使用して単一予測を作成する方法を示します。 単一予測は、異なる値を試してモデルでの影響を確認するのに優れた方法です。 このシナリオでは、6 人の経験を積んだオペレーターが勤務している場合の深夜シフトのサービス グレードを予測します (曜日は指定しません)。  
  
#### <a name="to-create-a-singleton-query-by-using-the-neural-network-model"></a>ニューラル ネットワーク モデルを使用して単一クエリを作成するには  
  
1.  [!INCLUDE[ssBIDevStudioFull](../includes/ssbidevstudiofull-md.md)] で、使用するモデルが含まれているソリューションを開きます。  
  
2.  データ マイニング デザイナーでクリックして、**マイニング モデル予測**タブ。  
  
3.  **マイニング モデルの**ウィンドウで、をクリックして**モデルの選択**します。  
  
4.  **マイニング モデルの選択** ダイアログ ボックスには、マイニング構造の一覧が表示されます。 マイニング構造を展開して、その構造に関連付けられているマイニング モデルの一覧を表示します。  
  
5.  マイニング構造 Call Center Default を展開し、Call Center - LR という名前のニューラル ネットワーク モデルを選択します。  
  
6.  **[マイニング モデル]** メニューの **[単一クエリ]** を選択します。  
  
     **単一クエリ入力**列がマイニング モデル内の列にマップされたダイアログ ボックスが表示されます。  
  
7.  **単一クエリ入力**ダイアログ ボックスで、shift キーの行をクリックし、*午前 0 時*します。  
  
8.  Lvl 2 Operators、および種類の行をクリックします。`6`します。  
  
9. 下の半分、**マイニング モデル予測** タブで、グリッドの最初の行をクリックします。  
  
10. **ソース**列で、下向きの矢印をクリックし、**予測関数**します。 **フィールド**列で、 **PredictHistogram**します。  
  
     自動的にこの予測関数で使用できる引数の一覧が表示されます、**条件と引数**ボックス。  
  
11. 内の列の一覧から ServiceGrade 列をドラッグして、**マイニング モデルの**ペイン、**条件と引数**ボックス。  
  
     列の名前が自動的に引数として挿入されます。 このテキスト ボックスには、任意の予測可能属性の列を選択してドラッグできます。  
  
12. ボタンをクリックして**結果ビューをクエリに切り替える**、予測クエリ ビルダーの上隅でします。  
  
 期待される結果には、これらの入力が与えられたときのサービス グレードごとの予測される値と、それぞれの予測に対するサポートおよび確率値が含まれます。 いつでもデザイン ビューに戻って入力の変更や追加を行うことができます。  
  
## <a name="creating-predictions-by-using-a-logistic-regression-model"></a>ロジスティック回帰モデルを使用して予測を作成します。  
 ビジネスの問題に関連する属性がわかっている場合は、ロジスティック回帰モデルを使用して、一部の属性を変更した場合の効果を予測できます。 ロジスティック回帰は、通常、独立変数の変化に基づいた予測のために使用される統計手法です。たとえば財務スコアリングにおいて、顧客の人口統計に基づいて顧客の行動を予測するために使用されます。  
  
 ここでは、予測に使用するデータ ソースの作成方法について説明した後、ビジネス上の疑問に回答するのに役立つ予測を作成します。  
  
### <a name="generating-data-used-for-bulk-prediction"></a>一括予測に使用するデータの生成  
 入力データを提供する方法はいくつかあります。たとえば、スプレッドシートから人員配置レベルをインポートし、そのデータをモデルで実行して翌月のサービス品質を予測できます。  
  
 このレッスンでは、データ ソース ビュー デザイナーを使用して名前付きクエリを作成します。 この名前付きクエリは、スケジュールのシフトごとにスタッフでの最大オペレーター数、受け付けられた問い合わせの最小数、生成された案件の平均数を計算するカスタム Transact-SQL ステートメントです。 その後、そのデータをマイニング モデルに結合して、今後の一連の日付についての予測を行います。  
  
##### <a name="to-generate-input-data-for-a-bulk-prediction-query"></a>一括予測クエリの入力データを生成するには  
  
1.  ソリューション エクスプ ローラーで右クリックして**データ ソース ビュー**、し、**新しいデータ ソース ビュー**します。  
  
2.  データ ソース ビュー ウィザードで [!INCLUDE[ssAWDWsp](../includes/ssawdwsp-md.md)]としてデータ ソース、およびクリック **[次へ]** します。  
  
3.  **テーブルおよびビュー**  ページで **次**テーブルを選択せずします。  
  
4.  **ウィザードの完了** ページで、名前を入力、`Shifts`します。  
  
     この名前は、データ ソース ビューの名前としてソリューション エクスプローラーに表示されます。  
  
5.  空のデザイン ペインを右クリックし **新しい名前付きクエリ**します。  
  
6.  **名前付きクエリの作成** ダイアログ ボックスの**名前**、型`Shifts for Call Center`します。  
  
     この名前は、名前付きクエリの名前としてデータ ソース ビュー デザイナーにのみ表示されます。  
  
7.  次のクエリ ステートメントを、ダイアログ ボックスの下部の SQL テキスト ペインに貼り付けます。  
  
    ```  
    SELECT DISTINCT WageType, Shift,   
    AVG(Orders) as AvgOrders, MIN(Orders) as MinOrders, MAX(Orders) as MaxOrders,  
    AVG(Calls) as AvgCalls, MIN(Calls) as MinCalls, MAX(Calls) as MaxCalls,  
    AVG(LevelTwoOperators) as AvgOperators, MIN(LevelTwoOperators) as MinOperators, MAX(LevelTwoOperators) as MaxOperators,  
    AVG(IssuesRaised) as AvgIssues, MIN(IssuesRaised) as MinIssues, MAX(IssuesRaised) as MaxIssues  
    FROM dbo.FactCallCenter  
    GROUP BY Shift, WageType  
    ```  
  
8.  デザイン ペインで、Shifts for Call Center では、テーブルを右クリックして**データの探索**T-SQL クエリによって返されるデータをプレビューします。  
  
9. タブを右クリックして**Shifts.dsv (デザイン)** 順にクリックします**保存**を新しいデータ ソース ビューの定義を保存します。  
  
### <a name="predicting-service-metrics-for-each-shift"></a>各シフトのサービス メトリックスの予測  
 シフトごとの値を生成した後は、作成したロジスティック回帰モデルの入力としてこれらの値を使用して、ビジネス プランニングで使用できる複数の予測を生成します。  
  
##### <a name="to-use-the-new-dsv-as-input-to-a-prediction-query"></a>新しい DSV を予測クエリへの入力として使用するには  
  
1.  データ マイニング デザイナーでクリックして、**マイニング モデル予測**タブ。  
  
2.  **マイニング モデルの**ウィンドウで、をクリックして**モデルの選択**、Call Center - LR を使用できるモデルの一覧からを選択します。  
  
3.  **マイニング モデルの** メニュー オプションをオフに**単一クエリ**します。 単一クエリ入力が失われる旨の警告が出力されます。 **[OK]** をクリックします。  
  
     **単一クエリ入力** ダイアログ ボックスに置き換え、**入力テーブルの選択** ダイアログ ボックス。  
  
4.  **[ケース テーブルの選択]** をクリックします。  
  
5.  **テーブルの選択**ダイアログ ボックスで、データ ソースの一覧から selectShifts します。 **テーブル/ビュー名**一覧で、Shifts for Call Center が (それが自動的に選択) をクリックして選択**ok をクリックします。**  
  
     **マイニング モデル予測**デザイン画面が更新され、入力データおよびモデルの列の名前とデータ型に基づいて作成されるマッピングを表示します。  
  
6.  結合線の 1 つを右クリックし **接続の変更**します。  
  
     このダイアログ ボックスでは、マップされている列とマップされていない列を正確に確認できます。 マイニング モデルには、Calls、Orders、IssuesRaised、および LvlTwoOperators の列が含まれています。これらの列は、ソース データ内のこれらの列に基づいて作成した任意の集計にマップできます。 このシナリオでは、平均値にマップします。  
  
7.  、LevelTwoOperators の横の空のセルをクリックして選択します**Shifts for Call Center.AvgOperators**します。  
  
8.  選択、呼び出しの横にある空のセルをクリックします。 **Shifts for Call Center.AvgCalls**します。 クリックして**OK**します。  
  
##### <a name="to-create-the-predictions-for-each-shift"></a>各シフトの予測を作成するには  
  
1.  下部にあるグリッドでの半分、**予測クエリ ビルダー**、空のセルをクリックして**ソース、** し、Shifts for Call Center。  
  
2.  空のセルに**フィールド**、shift キーを選択します。  
  
3.  グリッド内の次の空白行をクリックします。上の手順を繰り返して、WageType の行を追加します。  
  
4.  グリッドの次の空白行をクリックします。 **ソース**列で、**予測関数**します。 **フィールド**列で、 **Predict**します。  
  
5.  ServiceGrade 列をドラッグしてから、**マイニング モデルの**ペイン、グリッドとに、**条件と引数**セル。 **エイリアス**フィールドに「 **Predicted Service Grade**します。  
  
6.  グリッドの次の空白行をクリックします。 **ソース**列で、**予測関数**します。 **フィールド**列で、 **PredictProbability**します。  
  
7.  ServiceGrade 列をドラッグしてから、**マイニング モデルの**ペイン、グリッドとに、**条件と引数**セル。 **エイリアス**フィールドに「**確率**します。  
  
8.  クリックして**クエリ結果ビューに切り替え**予測を表示します。  
  
 次の表に、各シフトのサンプルの結果を示します。  
  
|Shift|WageType|Predicted Service Grade|確率|  
|-----------|--------------|-----------------------------|-----------------|  
|AM|holiday|0.165|0.377520666|  
|midnight|holiday|0.105|0.364105573|  
|PM1|holiday|0.165|0.40056055|  
|PM2|holiday|0.165|0.338532973|  
|AM|weekday|0.165|0.370847617|  
|midnight|weekday|0.08|0.352999173|  
|PM1|weekday|0.165|0.317419177|  
|PM2|weekday|0.105|0.311672027|  
  
### <a name="predicting-the-effect-of-reduced-response-time-on-service-grade"></a>短縮された応答時間のサービス グレードへの影響の予測  
 これまで、それぞれのシフトに対してなんらかの平均値を生成し、これらの値をロジスティック回帰モデルへの入力として使用しました。 ただし、電話放棄呼率を 0.00 ～ 0.05 の範囲に抑えるというビジネス目標からすれば、この結果は期待の持てるものではありません。  
  
 したがって、オペレーション チームは、サービス グレードに対して応答時間が大きく影響することを明らかにした元のモデルに基づいて、問い合わせに対する平均応答時間を短縮した場合にサービス品質が向上するかどうかを評価するための予測を作成することを決定しました。 たとえば、問い合わせに対する応答時間を現在の 90% または 80% に短縮した場合、サービス グレードの値はどうなるでしょうか。  
  
 各シフトの平均応答時間を計算するデータ ソース ビュー (DSV) を作成して、その平均応答時間の 80% または 90% を計算する列を追加するのは簡単です。 次に、DSV をモデルへの入力として使用します。  
  
 ここでは詳細な手順は示しませんが、応答時間を現在の応答時間の 80% または 90% に短縮したときのサービス グレードに対する影響の比較を次の表に示します。  
  
 これらの結果から、対象のシフトではサービス品質を改善するために現在の割合の 90% に応答時間を短縮する必要があると結論づけることができます。  
  
|シフト、賃金、日|現在の平均応答時間で予測したサービス品質|90% 短縮した応答時間で予測したサービス品質|80% 短縮した応答時間で予測したサービス品質|  
|--------------------------|------------------------------------------------------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------|  
|休日の午前|0.165|0.05|0.05|  
|休日の午後 1|0.05|0.05|0.05|  
|休日の深夜|0.165|0.05|0.05|  
  
 これ以外にも、このモデルに対してさまざまな予測クエリを作成できます。 たとえば、オペレーターの人数が必要なは、特定のサービス レベルを満たすために、受信呼び出し数に応答するかを予測できます。 ロジスティック回帰モデルには複数の出力を含めることができるため、数多くの別個のモデルを作成する必要なく、異なる独立変数を試してさまざまな結果を得ることができます。  
  
## <a name="remarks"></a>コメント  
 データ マイニング アドインの Excel 2007 では、レベル 2 オペレーターの人数などの複雑な質問に回答しやすくロジスティック回帰ウィザードは、特定のシフトのターゲット レベルのサービス グレードを向上させるために必要なを提供します。 データ マイニング アドインは、無料でダウンロード、ニューラル ネットワークまたはロジスティック回帰アルゴリズムに基づくウィザードが含まれています。 詳細については、次のリンクを参照してください。  
  
-   [SQL Server 2005 データ マイニング アドイン Office 2007 用](https://www.microsoft.com/sql/technologies/dm/addins.mspx):ゴール シークおよび What If シナリオ分析  
  
-   [SQL Server 2008 データ マイニング アドイン Office 2007 用](https://go.microsoft.com/fwlink/?LinkID=117790):ゴール シーク シナリオ分析、What If シナリオ分析、および予測計算  
  
## <a name="conclusion"></a>まとめ  
 ここでは、Microsoft ニューラル ネットワーク アルゴリズムおよび Microsoft ロジスティック回帰アルゴリズムに基づいたマイニング モデルを作成、カスタマイズ、および解釈する方法について説明しました。 これらの種類のモデルは非常に高度であり、あらゆる分析が可能であるため、複雑であり、習得するのが困難です。  
  
 ただし、これらのアルゴリズムは、要素の多くの組み合わせを反復処理して最も強い相関関係を自動的に識別し、Transact-SQL または PowerPivot を使用したデータの手動調査では発見することが非常に困難な考察の統計的サポートを提供します。  
  
## <a name="see-also"></a>参照  
 [ロジスティック回帰モデルのクエリ例](../../2014/analysis-services/data-mining/logistic-regression-model-query-examples.md)   
 [Microsoft ロジスティック回帰アルゴリズム](../../2014/analysis-services/data-mining/microsoft-logistic-regression-algorithm.md)   
 [Microsoft Neural Network Algorithm](../../2014/analysis-services/data-mining/microsoft-neural-network-algorithm.md)   
 [ニューラル ネットワーク モデルのクエリ例](../../2014/analysis-services/data-mining/neural-network-model-query-examples.md)  
  
  
