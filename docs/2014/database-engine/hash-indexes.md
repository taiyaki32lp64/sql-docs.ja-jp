---
title: ハッシュ インデックス |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: in-memory-oltp
ms.topic: conceptual
ms.assetid: f4bdc9c1-7922-4fac-8183-d11ec58fec4e
author: stevestein
ms.author: sstein
manager: craigg
ms.openlocfilehash: 263fdcd4b09c4acc6c2bba4d67629f867d64c6b3
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "62779492"
---
# <a name="hash-indexes"></a>ハッシュ インデックス
  インデックスは、メモリ最適化テーブルのエントリ ポイントとして使用します。 テーブルから行を読み取るときには、データがメモリ上のどの場所にあるかを特定するためのインデックスが必要になります。  
  
 ハッシュ インデックスは、配列の形に整理されたバケットのコレクションで構成されます。 ハッシュ関数は、ハッシュ インデックスの対応するバケットにインデックス キーをマッピングします。 次の図は、3 つのインデックス キーがそれぞれ、ハッシュ インデックスの異なる 3 つのバケットにマッピングされているようすを示したものです。 この図では、ハッシュ関数の名前を f(X) としています。  
  
 ![インデックス キーが異なるバケットにマップします。](../../2014/database-engine/media/hekaton-tables-2.gif "インデックス キーが異なるバケットにマップします。")  
  
 ハッシュ インデックスに使用するハッシュ関数には、以下の特徴があります。  
  
-   [!INCLUDE[ssNoVersion](../includes/ssnoversion-md.md)] には、あらゆるハッシュ インデックスに使用するハッシュ関数が 1 つ用意されています。  
  
-   ハッシュ関数は決定的です。 インデックス キーが同じであれば、常にハッシュ インデックスの同じバケットにマッピングされます。  
  
-   インデックス キーが違っても、同じハッシュ バケットにマッピングされることがあります。  
  
-   ハッシュ関数はバランスが取られます。つまり、通常、ハッシュ バケット上のインデックス キー値の分布はポアソン分布に従います。  
  
     ポアソン分布は均等な分布ではありません。 インデックス キーの値は、ハッシュ バケットで均等に分散されません。 たとえば、ポワソン分布の*n*個別のインデックス キーを*n*ハッシュ バケットの約 3 分の 1 の空のバケットを含む 1 つのインデックス キー、およびその他の 3 番目のバケットの 3 分の 1 の結果2 つのインデックス キーを含むです。 少数のバケットに、2 つ以上のキーが格納されます。  
  
 2 つのインデックス キーが同じハッシュ バケットにマッピングされた場合には、ハッシュの競合となります。 ハッシュの競合が大量に発生した場合には、読み取り操作のパフォーマンスに影響を及ぼすおそれがあります。  
  
 インメモリ ハッシュ インデックス構造は、メモリ ポインターの配列で構成されます。 各バケットが、この配列のオフセットにマッピングされています。 配列のバケットはそれぞれ、そのハッシュ バケットの最初の行を参照しています。 バケットの行はそれぞれ次の行を参照しています。このため、次の図に示すように、各ハッシュ バケットの行が連なった構造になります。  
  
 ![インメモリ ハッシュ インデックスの構造体。](../../2014/database-engine/media/hekaton-tables-3.gif "インメモリ ハッシュ インデックスの構造体。")  
  
 図では、行を備えたバケットが 3 つ示されています。 上から 2 番目のバケットには、赤い行が 3 つあります。 4 番目のバケットには、青色の行が 1 つあります。 一番下のバケットには、緑色の行が 2 つあります。 ここに挙げた行はいずれも、同じ行が別のバージョンになったものである可能性があります。  
  
 メモリ最適化テーブルのインデックスの詳細については、[メモリ最適化テーブルでのインデックス使用のガイドライン](../relational-databases/in-memory-oltp/memory-optimized-tables.md)を参照してください。  
  
## <a name="see-also"></a>参照  
 [メモリ最適化テーブルのインデックス](../../2014/database-engine/indexes-on-memory-optimized-tables.md)  
  
  
