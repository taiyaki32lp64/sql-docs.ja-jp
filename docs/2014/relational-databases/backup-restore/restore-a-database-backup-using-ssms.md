---
title: データベースバックアップの復元 (SQL Server Management Studio) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: backup-restore
ms.topic: conceptual
f1_keywords:
- sql12.swb.locatebackupfileazure.f1
- sql12.swb.specifybackup.f1
helpviewer_keywords:
- full backups [SQL Server]
- database restores [SQL Server], full backups
- backing up databases [SQL Server], full backups
- database backups [SQL Server], full backups
- restoring databases [SQL Server], full backups
ms.assetid: 24b3311d-5ce0-4581-9a05-5c7c726c7b21
author: MikeRayMSFT
ms.author: mikeray
manager: craigg
ms.openlocfilehash: 521fc35b8ada4b1eb6c62e75fed4e1d9f99d21c4
ms.sourcegitcommit: 5e45cc444cfa0345901ca00ab2262c71ba3fd7c6
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/29/2019
ms.locfileid: "70154779"
---
# <a name="restore-a-database-backup-sql-server-management-studio"></a>データベースのバックアップの復元 (SQL Server Management Studio)
  このトピックでは、データベースの完全バックアップを復元する方法について説明します。  
  
> [!IMPORTANT]  
>  完全復旧モデルまたは一括ログ復旧モデルを使用する場合は、[!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)] でデータベースを復旧する前に、ログの末尾と呼ばれるアクティブ トランザクション ログをバックアップする必要があります。 詳細については、「[トランザクション ログのバックアップ &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md)」を参照してください. 暗号化されたデータベースを復元するには、データベースの暗号化に使用された証明書または非対称キーにアクセスできることが必要です。 証明書または非対称キーがないと、データベースは復元できません。 このため、バックアップが必要である間は、データベース暗号化キーの暗号化に使用する証明書を保持しておく必要があります。 詳細については、「 [SQL Server Certificates and Asymmetric Keys](../security/sql-server-certificates-and-asymmetric-keys.md)」をご覧ください。  
  
 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] 以降のデータベースを [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)] に復元すると、データベースが自動的にアップグレードされることに注意してください。 通常、データベースは直ちに使用可能になります。 ただし、 [!INCLUDE[ssVersion2005](../../includes/ssversion2005-md.md)] データベースにフルテキスト インデックスがある場合、アップグレード プロセスでは、 **[フルテキスト アップグレード オプション]** サーバー プロパティの設定に応じて、インポート、リセット、または再構築が行われます。 アップグレード オプションが **[インポート]** または **[再構築]** に設定されている場合、アップグレード中はフルテキスト インデックスを使用できなくなります。 インデックスを作成するデータ量によって、インポートには数時間、再構築には最大でその 10 倍の時間がかかることがあります。 なお、アップグレード オプションが **[インポート]** に設定されており、フルテキスト カタログが使用できない場合は、関連付けられたフルテキスト インデックスが再構築されます。 **フルテキスト アップグレード オプション** プロパティの設定の表示と変更については、「 [サーバー インスタンスでのフルテキスト検索の管理と監視](../search/manage-and-monitor-full-text-search-for-a-server-instance.md)」を参照してください。  
  
### <a name="to-restore-a-full-database-backup"></a>データベースの完全バックアップを復元するには  
  
1.  [!INCLUDE[msCoName](../../includes/msconame-md.md)] [!INCLUDE[ssDEnoversion](../../includes/ssdenoversion-md.md)]の適切なインスタンスに接続後、オブジェクト エクスプローラーでサーバー名をクリックして、サーバー ツリーを展開します。  
  
2.  **[データベース]** を展開します。 復元するデータベースに応じて、ユーザー データベースを選択するか、 **[システム データベース]** を展開してシステム データベースを選択します。  
  
3.  データベースを右クリックし、 **[タスク]** 、 **[復元]** の順にポイントし、 **[データベース]** をクリックすると、 **[データベースの復元]** ダイアログボックスが開きます。  
  
4.  **[全般]** ページの **復元元**のセクションを使用して、復元するバックアップ セットの復元元ファイルと場所を指定します。 次のいずれかのオプションを選びます。  
  
    -   **データベース**  
  
         復元するデータベースをドロップダウン リストから選択します。 このリストには、 **msdb** バックアップ履歴に従ってバックアップされたデータベースのみが含まれます。  
  
    > [!NOTE]  
    >  別のサーバーで作成されたバックアップの場合、復元先のサーバーには指定されたデータベースのバックアップ履歴情報が存在しません。 この場合、 **[デバイス]** をクリックして、復元するファイルまたはデバイスを手動で指定します。  
  
    -   **[デバイス]**  
  
         参照ボタン ( **[...]** ) をクリックし、 **[バックアップ デバイスの選択]** ダイアログ ボックスを開きます。 **[バックアップ メディアの種類]** ボックスから、デバイスの種類を 1 つ選択します。 **[バックアップ メディア]** ボックスにデバイスを追加するには、 **[追加]** をクリックします。  
  
         **[バックアップ メディア]** ボックスに目的のデバイスを追加したら、 **[OK]** をクリックして、 **[全般]** ページに戻ります。  
  
         **[ソース: デバイス: データベース]** ボックスの一覧で、復元するデータベースの名前を選択します。  
  
        > [!NOTE]  
        >  この一覧は **[デバイス]** を選択した場合にのみ使用できます。 選択されたデバイスにバックアップを持つデータベースのみが使用できるようになります。  
  
         **バックアップメディア**  
         復元操作に使用するメディア (**ファイル**、**テープ**、 **URL**、または**バックアップデバイス**) を選択します。 **[テープ]** オプションは、テープ ドライブがコンピューターにセットされている場合だけ表示されます。また、 **[バックアップ デバイス]** オプションは、1 つ以上のバックアップ デバイスが存在する場合だけ表示されます。  
  
         **バックアップの場所**  
         復元操作で使用するメディアを表示、追加、または削除します。 この一覧には、最大で 64 個のファイル、テープ、またはバックアップ デバイスを表示できます。  
  
         **[追加]**  
         バックアップデバイスの場所を **[バックアップの場所]** の一覧に追加します。 **[バックアップメディア]** フィールドで選択したメディアの種類に応じて、 **[追加]** をクリックすると、次のいずれかのダイアログボックスが開きます。  
  
        |メディアの種類|ダイアログ ボックス|[説明]|  
        |----------------|----------------|-----------------|  
        |**ファイル**|**[バックアップ ファイルの検索]**|このダイアログ ボックスでは、ツリーからローカル ファイルを選択するか、完全修飾の汎用名前付け規則 (UNC) 名を使用したリモート ファイルを指定できます。 詳細については、「 [バックアップ デバイス &#40;SQL Server&#41;](backup-devices-sql-server.md)のインスタンスが動作しているコンピューターにテープ ドライブが装着されている場合のみ使用できます。|  
        |**[デバイス]**|**[バックアップ デバイスの選択]**|このダイアログ ボックスでは、サーバー インスタンスで定義された論理バックアップ デバイスの一覧から選択できます。|  
        |**Tape**|**[バックアップ テープの選択]**|このダイアログ ボックスでは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)]のインスタンスが動作しているコンピューターに物理的に接続されているテープ ドライブの一覧から選択できます。|  
        |**[URL]**|これにより、2 つのダイアログ ボックスが次の順序で表示されます。<br /><br /> 1) **Azure Storage に接続する**<br /><br /> 2) **Azure でのバックアップファイルの検索**|**[Azure Storage への接続]** ダイアログボックスで、Azure ストレージアカウント名とアクセスキーの情報を格納する既存の sql 資格情報を選択するか、ストレージアカウント名とストレージアクセスキーの情報を指定して新しい sql 資格情報を作成します。 詳細については、「 [Connect &#40;to&#41;Azure Storage Restore](connect-to-microsoft-azure-storage-restore.md)」を参照してください。<br /><br /> **[バックアップファイルの検索]** ダイアログボックスで、左側のフレームに表示されているコンテナーの一覧からファイルを選択できます。|  
  
         一覧がいっぱいの場合は、 **[追加]** ボタンを使用できません。  
  
         **[削除]**  
         選択されている 1 つまたは複数のファイル、テープ、または論理バックアップ デバイスを削除します。  
  
         **目次**  
         選択されているファイル、テープ、または論理バックアップ デバイスのメディアの内容を表示します。  
  
5.  復元先のセクションの **[データベース]** ボックスに、復元するデータベースの名前が自動的に表示されます。 データベースの名前を変更するには、 **[データベース]** ボックスに新しい名前を入力します。  
  
6.  **[復元先]** ボックスで、既定値の **[最後に作成されたバックアップ]** のままにするか、 **[タイムライン]** をクリックして、 **[バックアップのタイムライン]** ダイアログ ボックスにアクセスし、具体的にどの時点で復旧アクションを停止するかを手動で選択します。 特定の時点を指定する方法の詳細については、「 [バックアップ タイムライン](backup-timeline.md)」をご覧ください。  
  
7.  **[復元するバックアップ セット]** グリッドで、復元するバックアップを選択します。 このグリッドには、指定された場所に対して使用可能なバックアップが表示されます。 既定では、復旧計画が推奨されています。 推奨された復元計画を変更するには、グリッドの選択を変更します。 以前のバックアップの選択を解除すると、以前のバックアップの復元に依存するバックアップは自動的に選択が解除されます。 **[復元するバックアップ セット]** グリッドの列の詳細については、「[データベースの復元 &#40;[全般] ページ&#41;](../../integration-services/general-page-of-integration-services-designers-options.md)」を参照してください。  
  
8.  必要に応じて、 **[ページの選択]** ペインの **[ファイル]** をクリックして、 **[ファイル]** ダイアログ ボックスにアクセスします。 このダイアログ ボックスでは、 **[次のデータベース ファイルに復元]** グリッド内の各ファイルに新しい復元先を指定することで、新しい場所にデータベースを復元できます。 このグリッドの詳細については、「[データベースの復元 &#40;[ファイル] ページ&#41;](restore-database-files-page.md)」を参照してください。  
  
9. 拡張オプションを表示または選択するには、 **[オプション]** ページの **[復元オプション]** パネルを使用します。状況に応じて、次の任意のオプションを選択できます。  
  
    1.  `WITH` オプション (必須ではありません):  
  
        -   **[既存のデータベースを上書きする (WITH REPLACE)]**  
  
        -   **[レプリケーションの設定を保存する (WITH KEEP_REPLICATION)]**  
  
        -   **[復元するデータベースへのアクセスを制限する (WITH RESTRICTED_USER)]**  
  
    2.  **[復旧状態]** ボックスのオプションを選択します。 このボックスの選択内容により、復元操作後のデータベースの状態が決まります。  
  
        -   **[RESTORE WITH RECOVERY]** : コミットされていないトランザクションをロールバックして、データベースを使用可能な状態にします。これが既定の動作です。 別のトランザクション ログは復元できません。 このオプションは、必要なバックアップをすべて復元する場合に選択します。  
  
        -   **[RESTORE WITH NORECOVERY]** : データベースは操作不可状態のままとなり、コミットされていないトランザクションはロールバックされません。 別のトランザクション ログは復元できます データベースは、復旧されるまで使用できません。  
  
        -   **[RESTORE WITH STANDBY]** : データベースを読み取り専用モードにします。 コミットされていないトランザクションは元に戻されますが、復旧結果を元に戻せるように元に戻す操作をスタンバイ ファイルに保存します。  
  
    3.  選択した時点まで復元するために必要であれば、 **[復元の前にログ末尾のバックアップを実行する]** が選択されます。 この設定を変更する必要はありません。ログの末尾をバックアップする必要がない場合でも、そのように選択してかまいません。 ここにファイル名を挿入します。 **[全般**] ページの最初のバックアップセットが Azure にある場合、末尾のログも同じストレージコンテナーにバックアップされます。  
  
    4.  データベースへのアクティブな接続がある場合、復元操作は失敗する可能性があります。 **とデータベース間のすべてのアクティブな接続を閉じるには、** [既存の接続を閉じる] [!INCLUDE[ssManStudio](../../includes/ssmanstudio-md.md)] オプションをオンにします。 このチェック ボックスをオンにすると、データベースは復元操作の実行前にシングル ユーザー モードに設定され、復元操作の完了後にマルチユーザー モードに設定されます。  
  
    5.  復元操作と復元操作の間に、その都度、確認のメッセージを表示するには、 **[各バックアップを復元する前に確認する]** をオンにします。 通常は、その必要はありません。データベースが大きく、復元操作のステータスを監視する必要がある場合にのみ使用します。  
  
     これらの復元オプションの詳細については、「 [[データベースの復元] &#40;[オプション] ページ&#41;](restore-database-options-page.md)と呼ばれる) をバックアップする必要がある場合があります。  
  
10. [!INCLUDE[clickOK](../../includes/clickok-md.md)]  
  
## <a name="see-also"></a>参照  
 [トランザクション ログのバックアップ &#40;SQL Server&#41;](back-up-a-transaction-log-sql-server.md)   
 [データベースの完全バックアップの作成 &#40;SQL Server&#41;](create-a-full-database-backup-sql-server.md)   
 [データベースを新しい場所に復元する &#40;SQL Server&#41;](restore-a-database-to-a-new-location-sql-server.md)   
 [トランザクション ログ バックアップの復元 &#40;SQL Server&#41;](restore-a-transaction-log-backup-sql-server.md)   
 [RESTORE &#40;Transact-SQL&#41;](/sql/t-sql/statements/restore-statements-transact-sql)   
 [[データベースの復元] &#40;[オプション] ページ&#41;](restore-database-options-page.md)   
 [[データベースの復元] &#40;[全般] ページ&#41;](../../integration-services/general-page-of-integration-services-designers-options.md)  
  
  
