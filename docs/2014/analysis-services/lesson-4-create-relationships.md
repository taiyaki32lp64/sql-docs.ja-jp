---
title: 'レッスン 5: [リレーションシップの作成] | Microsoft Docs'
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: abac1a00-f827-4c3e-a473-6db5c8a3a66f
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 7a80f607c3187e967404ce018b7eed00497d9c01
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "66078580"
---
# <a name="lesson-5-create-relationships"></a>レッスン 5: [リレーションシップの作成]
  このレッスンでは、データをインポートした際に自動的に作成されたリレーションシップを確認し、異なるテーブル間に新しいリレーションシップを追加します。 リレーションシップとは、2 つのテーブル間を接続し、それらのテーブル内のデータをどのように関連付けるかを決定するものです。 たとえば、Product テーブルと Product Subcategory テーブルの間には、どの製品も特定のサブカテゴリに属しているという事実に基づいたリレーションシップが存在します。 詳細については、[「リレーションシップ (SSAS テーブル)」](tabular-models/relationships-ssas-tabular.md) を参照してください。  
  
 このレッスンを完了するまでに時間を推定するには。**10 分**  
  
## <a name="prerequisites"></a>前提条件  
 このトピックはテーブル モデリング チュートリアルの一部であり、チュートリアルでの順番に従って実行する必要があります。 このレッスンでは、タスクを実行する前に、前のレッスンを完了が必要があります。[レッスン 3:列名の変更](rename-columns.md)します。  
  
## <a name="review-existing-relationships-and-add-new-relationships"></a>既存のリレーションシップの確認と新しいリレーションシップの追加  
 テーブルのインポート ウィザードを使用してデータをインポートした際に、AdventureWorksDW データベースから 7 つのテーブルがインポートされました。 通常、リレーショナル ソースからデータをインポートすると、データと共に既存のリレーションシップがインポートされます。 ただし、モデルの作成を進める前に、それらのテーブル間リレーションシップが適切に作成されたかどうかを確認する必要があります。 またこのチュートリアルでは、3 つの新しいリレーションシップの追加も行います。  
  
#### <a name="to-review-existing-relationships"></a>既存のリレーションシップを確認するには  
  
1.  [!INCLUDE[ssBIDevStudio](../includes/ssbidevstudio-md.md)]で、 **[モデル]** メニューをクリックし、 **[モデル ビュー]** をポイントして、 **[ダイアグラム ビュー]** をクリックします。  
  
     モデル デザイナーがダイアグラム ビューで表示されます。このグラフィカルな形式では、インポートしたすべてのテーブルが、それらを結ぶ線と共に表示されます。 テーブル間の線は、データのインポート時に自動的に作成されたリレーションシップを表します。  
  
     モデル デザイナーの右上隅にあるミニマップ コントロールを使用すると、できるだけ多くのテーブルが表示されるようにビューを調整できます。 テーブルをクリックして別の場所にドラッグすれば、テーブルどうし近づけたり、特定の順序に並べたりすることもできます。 テーブルを移動しても、テーブル間の既存のリレーションシップには影響しません。 特定のテーブル内のすべての列を表示するには、テーブルの端をクリックしてドラッグし、大きさを調整します。  
  
2.  **Customer** テーブルと **Geography** テーブルの間の実線をクリックします。 これら 2 つのテーブル間の実線は、そのリレーションシップがアクティブであることを示します。つまり、そのリレーションシップは DAX 数式の計算時に既定で使用されます。  
  
     **Customer** テーブル内の **Geography Id** 列と **Geography** テーブル内の **Geography Id** 列が、どちらもボックス内に表示されます。 これは、これらがリレーションシップに使用される列であるということを示しています。 リレーションシップのプロパティに表示されます、**プロパティ**ウィンドウ。  
  
    > [!TIP]  
    >  ダイアグラム ビューのモデル デザイナーを使用することに加え、 **[リレーションシップの管理]** ダイアログ ボックスを使用して、すべてのテーブル間のリレーションシップをテーブル形式で表示することもできます。 **[テーブル]** メニューをクリックし、 **[リレーションシップの管理]** をクリックします。 **[リレーションシップの管理]** ダイアログ ボックスに、データのインポート時に自動的に作成されたリレーションシップが表示されます。  
  
3.  ダイアグラム ビューのモデル デザイナーか、または **[リレーションシップの管理]** ダイアログ ボックスを使用して、各テーブルが AdventureWorksDW データベースからインポートされた際に、次のリレーションシップが作成されたことを確認します。  
  
    |Active|テーブル|関連する参照テーブル|  
    |------------|-----------|--------------------------|  
    |はい|**Customer [Geography Id]**|**Geography [Geography Id]**|  
    |はい|**製品 [製品のサブカテゴリの Id]**|**Product Subcategory [製品のサブカテゴリの Id]**|  
    |[はい]|**Product Subcategory [製品カテゴリ Id]**|**製品カテゴリの [製品カテゴリ Id]**|  
    |はい|**Internet Sales [Customer Id]**|**Customer [Customer Id]**|  
    |はい|**Internet Sales [Product Id]**|**製品 [Product Id]**|  
  
 上記のテーブル内のリレーションシップのいずれかが存在しない場合は、モデルには、次の表が含まれることを確認します。Customer、日付、Geography、Product、Product Category、Product Subcategory、および Internet Sales。 同じデータ ソース接続からのテーブルが複数回インポートされた場合、それらのテーブル間のリレーションシップは作成されず、手動で作成する必要があります。  
  
 場合によっては、特定のビジネス ロジックをサポートするために、モデル内のテーブル間に追加のリレーションシップを作成する必要があります。 このチュートリアルでは、Internet Sales テーブルと Date テーブルの間に 3 つの追加リレーションシップを作成する必要があります。  
  
#### <a name="to-add-new-relationships-between-tables"></a>テーブル間に新しいリレーションシップを追加するには  
  
1.  モデル デザイナーの **Internet Sales** テーブルで、 **Order Date** 列をクリックし、そのままカーソルを **Date** テーブル内の **Date** 列にドラッグして離します。  
  
     **Internet Sales** テーブルの **Order Date** 列と **Date** テーブルの **Date** 列の間にアクティブなリレーションシップが作成され、それを示す実線が表示されます。  
  
    > [!NOTE]  
    >  リレーションシップを作成する際には、主テーブルと、関連する参照テーブルの順序は自動的に正しい順序に設定されます。  
  
2.  **Internet Sales** テーブルで、 **Due Date** 列をクリックし、そのままカーソルを **Date** テーブル内の **Date** 列にドラッグして離します。  
  
     **Internet Sales** テーブルの **Due Date** 列と **Date** テーブルの **Date** 列の間に非アクティブなリレーションシップが作成され、それを示す点線が表示されます。 テーブル間には複数のリレーションシップを設定できますが、一度にアクティブにできるのは 1 つだけです。  
  
3.  最後に、もう 1 つリレーションシップを作成します。 **Internet Sales** テーブルで、 **Ship Date** 列をクリックし、そのままカーソルを **Date** テーブル内の **Date** 列にドラッグして離します。  
  
     **InternetSales** テーブルの **Ship Date** 列と **Date** テーブルの **Date** 列の間に非アクティブなリレーションシップが作成され、それを示す点線が表示されます。  
  
## <a name="next-step"></a>次の手順  
 このレッスンを続行するには、次のレッスンに移動します。[レッスン 6:計算列を作成](lesson-5-create-calculated-columns.md)です。  
  
  
