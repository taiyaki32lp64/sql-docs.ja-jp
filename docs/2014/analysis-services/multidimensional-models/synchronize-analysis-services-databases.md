---
title: Analysis Services データベースの同期 |Microsoft Docs
ms.custom: ''
ms.date: 05/24/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- Analysis Services deployments, Synchronize Database Wizard
- deploying [Analysis Services], Synchronize Database Wizard
- Synchronize Database Wizard
- synchronization [Analysis Services]
ms.assetid: 6aeff68d-8470-43fb-a3ed-a4b9685332c2
author: minewiskan
ms.author: owend
manager: craigg
ms.openlocfilehash: 0a561b348b30afcbfe5305681f56e4f8314fa510
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "66072850"
---
# <a name="synchronize-analysis-services-databases"></a>Analysis Services データベースの同期
  [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] に付属しているデータベースの同期機能は、同期元サーバー上のデータベースから同期先サーバー上のデータベースにデータおよびメタデータをコピーすることによって、2 つの [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] データベースを同一にします。 データベースの同期機能は、次のタスクを達成するために使用します。  
  
-   ステージング サーバーから運用サーバーへのデータベースの配置。  
  
-   ステージング サーバー上のデータベースにあるデータとメタデータに対して行った変更を使用して、実稼働サーバーのデータベースを更新します。  
  
-   後で実行してデータベースの同期をとるための XMLA スクリプトも作成できます。  
  
-   キューブとディメンションが複数のサーバーで処理されている分散ワークロードでは、データベースの同期機能を使用して、変更を単一のデータベースにマージします。  
  
 データベースの同期機能は同期先サーバーで開始され、データとメタデータのプルを実行して同期元サーバー上にあるデータベースのコピーに書き込みます。 データベースが存在しない場合は作成されます。 同期は 1 回限り実行される一方向の動作であり、データベースをコピーした段階で完了します。 データベース間のリアルタイム パリティ (同等性) は実現されません。  
  
 最新の変更をステージング サーバーから実稼働データベースにプルするために、同期元サーバーと同期先サーバーに既に存在するデータベースを再同期することができます。 2 台のサーバー上に存在するファイルは変更点を比較され、異なっているファイルが更新されます。 同期先サーバー上の既存のデータベースは、バックグラウンドで同期を実行している間も使用できます。 同期の進行中も、ユーザーは引き続き同期先データベースに対するクエリを実行できます。 同期が完了すると、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] は新しくコピーしたデータおよびメタデータにユーザーを自動的に切り替え、同期先データベースから古いデータを削除します。  
  
 データベースを同期するには、データベースの同期ウィザードを実行して直ちにデータベースを同期するか、このウィザードを使用して、後で実行できる同期スクリプトを生成します。 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] データベースおよびキューブの可用性とスケーラビリティを向上するために、いずれかの方法を使用できます。  
  
> [!NOTE]  
>  次のホワイト ペーパーは、Analysis Services の以前のバージョンを対象として作成されたものですが、SQL Server 2012 を使用して作成したスケーラブルな多次元ソリューションにも引き続き当てはまります。 詳細については、「[Analysis Services を使用するクエリのスケールアウト](https://go.microsoft.com/fwlink/?LinkId=253136)」および「[読み取り専用データベースによる Analysis Services のクエリのスケールアウト](https://go.microsoft.com/fwlink/?LinkId=253137.)」を参照してください。  
  
## <a name="prerequisites"></a>前提条件  
 データベースの同期を開始する同期先 (またはターゲット) サーバーで、Analysis Services サーバー管理者ロールのメンバーである必要があります。 同期元サーバーで、使用している Windows ユーザー アカウントに、同期元データベースに対するフル コントロールの権限が付与されている必要があります。 データベースを対話形式で同期する場合は、自分の Windows ユーザー ID のセキュリティ コンテキストで同期が実行されることに注意してください。 自分のアカウントが特定のオブジェクトへのアクセスを拒否された場合は、そのようなオブジェクトは操作から除外されます。 サーバー管理者ロールとデータベース権限の詳細については、次を参照してください[サーバーの管理者アクセス許可の付与&#40;Analysis Services&#41; ](../instances/grant-server-admin-rights-to-an-analysis-services-instance.md)と[データベース アクセス許可を付与&#40;。Analysis Services&#41;](grant-database-permissions-analysis-services.md)します。  
  
 既定のインスタンス間のリモート接続を許可するために、両方のサーバーで TCP ポート 2383 を開く必要があります。 Windows ファイアウォールの例外を作成する方法の詳細については、「 [Analysis Services のアクセスを許可するための Windows ファイアウォールの構成](../instances/configure-the-windows-firewall-to-allow-analysis-services-access.md)」を参照してください。  
  
 ソースと宛先の両方のサーバーは、同じバージョンおよび service pack である必要があります。 モデルのメタデータが同期されていることもあるため、ビルドの互換性を確保する両方のサーバー数する必要があります同じであります。 各インストールのエディションが、データベースの同期をサポートしている必要があります。 [!INCLUDE[ssCurrent](../../includes/sscurrent-md.md)]では、データベースの同期は、Enterprise、Developer、および Business Intelligence の各エディションでサポートされています。 各エディションで機能の詳細については、次を参照してください。[機能は、SQL Server 2014 の各エディションでサポートされている](../../getting-started/features-supported-by-the-editions-of-sql-server-2014.md)します。  
  
 サーバー配置モードは、各サーバーで同じである必要があります。 同期するデータベースが多次元である場合は、同期元サーバーと同期先サーバーの両方が、多次元サーバー モードで構成されている必要があります。 配置モードの詳細については、「[Analysis Services インスタンスのサーバー モードの決定](../instances/determine-the-server-mode-of-an-analysis-services-instance.md)」を参照してください。  
  
 同期元サーバーでレイジー集計処理を使用している場合は、その処理を無効にします。 バックグラウンドで処理されている集計は、データベースの同期を妨げる可能性があります。 このサーバー プロパティの設定の詳細については、「[OLAP のプロパティ](../server-properties/olap-properties.md)」を参照してください。  
  
> [!NOTE]  
>  データベースのサイズは、同期が適切な方法であるかどうかを判断する要因になります。 厳格な要件はありませんが、同期が遅すぎる場合はときに、考慮を並列に複数のサーバー同期テクニカル ペーパーで説明されています。[Analysis Services の同期のベスト プラクティス](https://go.microsoft.com/fwlink/?LinkID=253136)します。  
  
## <a name="synchronize-database-wizard"></a>データベースの同期ウィザード  
 同期元から同期先データベースへの一方向の同期を実行するか、データベースの同期操作を指定するスクリプトを生成するには、データベースの同期ウィザードを使用します。 同期処理中にローカル パーティションとリモート パーティションの両方を同期し、ロールを含めるかどうかを選択することもできます。  
  
 データベースの同期ウィザードでは、次の手順に従います。  
  
-   同期に使用する同期元 (ソース) インスタンスとデータベースを選択します。  
  
-   同期先のインスタンス上のローカル パーティションの格納場所を選択します。  
  
-   リモート パーティションの格納場所をその他の同期先のインスタンス上で選択します。  
  
-   ソース インスタンスおよびデータベースから同期先のインスタンスにコピーする、セキュリティのレベルおよびメンバーシップ情報を選択します。  
  
-   すぐに同期をとるか、または後で同期するためにデータベースの同期ウィザードによって生成される XML for Analysis (XMLA) **同期** コマンドをスクリプト ファイルに保存するかの選択を行います。  
  
 既定では、既存のセキュリティ グループに属するメンバーシップを除き、すべてのデータおよびメタデータの同期がとられます。 また、データおよびメタデータの同期時に、すべてのセキュリティ設定をコピーするか、あるいは一切無視することもできます。  
  
#### <a name="run-the-wizard"></a>ウィザードの実行  
  
1.  [!INCLUDE[ssManStudioFull](../../includes/ssmanstudiofull-md.md)]で、同期先データベースを実行する [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] のインスタンスに接続します。 たとえば、実稼働サーバーにデータベースを配置する場合は、実稼働サーバーでウィザードを実行します。  
  
2.  オブジェクト エクスプローラーで、 **[データベース]** フォルダーを右クリックし、 **[同期]** をクリックします。  
  
3.  同期元サーバー名と同期元データベースを指定します。 [同期するデータベースの選択] ページの **[同期元サーバー]** と **[同期元データベース]** で、同期元サーバーと同期元データベースの名前を入力します。 たとえば、テスト環境から実稼働サーバーに配置する場合は、同期元は、ステージング サーバー上のデータベースです。  
  
     **[同期先サーバー]** に、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] [同期元データベース] **で選択したデータベースのデータおよびメタデータの同期先となる** インスタンスの名前が表示されます。  
  
     同じ名前を持つコピー元データベースとコピー先データベースで同期が実行されます。 コピー先サーバーに、コピー元データベースと同じ名前のデータベースが既に存在する場合、コピー元のメタデータとデータを使用してコピー先のデータベースが更新されます。 コピー先サーバーに同じ名前のデータベースが存在しない場合は作成されます。  
  
4.  必要に応じて、ローカル パーティションの場所を変更します。 **[ローカル パーティションの場所を指定]** ページを使用して、ローカル パーティションが同期先サーバーに格納される場所を指定します。  
  
    > [!NOTE]  
    >  このページは、指定のデータベースに 1 つ以上のローカル パーティションが存在する場合にのみ表示されます。  
  
     パーティションのセットがコピー元サーバーの C ドライブにインストールされている場合、これらのパーティションをコピー先サーバーの別の場所にコピーできます。 既定の場所を変更しない場合、コピー元サーバー上の各キューブ内のメジャー グループ パーティションは、コピー先サーバーの同じ場所に配置されます。 同様に、コピー元サーバーがリモート パーティションを使用する場合、コピー先サーバーも同じリモート パーティションを使用します。  
  
     **[場所]** オプションでは、同期元フォルダー、同期先フォルダー、および同期先インスタンスに格納するローカル パーティションの推定サイズがグリッドに一覧表示されます。 このグリッドには次の列が含まれています。  
  
     **[同期元フォルダー]**  
     ローカル パーティションが含まれている同期元 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスのフォルダー名が表示されます。 列に値 "(既定値)" が含まれている場合は、同期元インスタンスの既定の場所にローカル パーティションが含まれています。  
  
     **[同期先フォルダー]**  
     ローカル パーティションを同期する同期先 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスのフォルダー名が表示されます。 列に "(既定値)" が含まれている場合は、同期先インスタンスの既定の場所にローカル パーティションが含まれています。  
  
     **[...]** ボタンをクリックして、 **[リモート フォルダーの参照]** ダイアログ ボックスを表示し、選択した場所に格納されたローカル パーティションを同期する同期先インスタンス上のフォルダーを指定します。  
  
    > [!NOTE]  
    >  同期元インスタンスの既定の場所に格納されているローカル パーティションを選択した場合、この列は変更できません。  
  
     **Size**  
     ローカル パーティションの推定サイズが表示されます。  
  
     **[選択した場所のパーティション]** オプションでは、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] [場所] **で選択した行の** [同期元フォルダー] **列で指定した同期元**インスタンス上の場所に格納されたローカル パーティションについて、グリッドに説明が表示されます。  
  
     **Cube**  
     パーティションが含まれているキューブの名前が表示されます。  
  
     **[メジャー グループ]**  
     パーティションが含まれているキューブ内のメジャー グループの名前が表示されます。  
  
     **[パーティション名]**  
     パーティションの名前が表示されます。  
  
     **[サイズ (MB)]**  
     パーティションのサイズ (MB) が表示されます。  
  
5.  必要に応じて、リモート パーティションの場所を変更します。 **[リモート パーティションの場所を指定]** ページでは、同期元サーバー上の指定したデータベースによって管理されているリモート パーティションを同期するかどうかを決定し、選択したリモート パーティションを格納する同期先の [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスおよびデータベースを指定します。  
  
    > [!NOTE]  
    >  このページは、同期元の [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスの指定されたデータベースによって 1 つ以上のリモート パーティションが管理されている場合にのみ表示されます。  
  
     **[場所]** オプションでは、同期元データベースのリモート パーティションが格納されている場所について、同期元と同期先の情報、各場所で使用される記憶領域サイズなど、選択したデータベースから得られる詳細情報がグリッドに一覧表示されます。 このグリッドには次の列が含まれています。  
  
     **[同期]**  
     リモート パーティションが格納されている場所を同期中に含める場合は、オンにします。  
  
    > [!NOTE]  
    >  このオプションをオフにした場所では、その場所に格納されているリモート パーティションは同期されません。  
  
     **[同期元サーバー]**  
     リモート パーティションが含まれている [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスの名前が表示されます。  
  
     **[同期元フォルダー]**  
     リモート パーティションが含まれている [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスのフォルダー名が表示されます。 列に値 "(既定値)" が含まれている場合は、 **[同期元サーバー]** に表示されているインスタンスの既定の場所にリモート パーティションが含まれています。  
  
     **[同期先サーバー]**  
     [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] [同期元サーバー] **と** [同期元フォルダー] **で指定された場所に格納されているリモート パーティションを同期する、** インスタンスの名前が表示されます。  
  
     **[...]** ボタンをクリックして、 **[接続マネージャー]** ダイアログ ボックスを表示し、選択した場所に格納されたリモート パーティションを同期する [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスを指定します。  
  
     **[同期先フォルダー]**  
     リモート パーティションを同期する同期先 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] インスタンスのフォルダー名が表示されます。 列に値 "(既定値)" が含まれている場合は、同期先インスタンスの既定の場所にリモート パーティションが含まれています。  
  
     **[...]** ボタンをクリックして、 **[リモート フォルダーの参照]** ダイアログ ボックスを表示し、選択した場所に格納されたリモート パーティションを同期する同期先インスタンス上のフォルダーを指定します。  
  
     **Size**  
     この場所に格納されたリモート パーティションの推定サイズが表示されます。  
  
     **[選択した場所のパーティション]** では、 [!INCLUDE[ssASnoversion](../../includes/ssasnoversion-md.md)] [場所] **で選択した行の** [同期元フォルダー] **列で指定した同期元の**インスタンス上の場所に格納されたリモート パーティションについて、グリッドに説明が表示されます。 このグリッドには次の列が含まれています。  
  
     **Cube**  
     パーティションが含まれているキューブの名前が表示されます。  
  
     **[メジャー グループ]**  
     パーティションが含まれているキューブ内のメジャー グループの名前が表示されます。  
  
     **[パーティション名]**  
     パーティションの名前が表示されます。  
  
     **[サイズ (MB)]**  
     パーティションのサイズ (MB) が表示されます。  
  
6.  ユーザー権限の情報を含める必要があるかどうか、および圧縮を使用する必要があるかどうかを指定します。 既定では、同期先サーバーにファイルをコピーする前に、ウィザードはすべてのデータとメタデータを圧縮します。 このオプションを使用すると、ファイル転送がより高速になります。 ファイルは、同期先サーバーに到着した時点で圧縮解除されます。  
  
     **[すべてコピー]**  
     同期時にセキュリティ定義とメンバーシップ情報を含めます。  
  
     **[メンバーシップのスキップ]**  
     同期時にセキュリティ定義を含め、メンバーシップ情報を含めません。  
  
     **[すべて無視する]**  
     同期元データベース内に現在存在しているセキュリティ定義とメンバーシップ情報を無視する場合に選択します。 同期中に、同期先データベースが作成された場合は、セキュリティ定義とメンバーシップ情報はコピーされません。 同期先データベースが既に存在し、ロールおよびメンバーシップが存在する場合、そのセキュリティ情報は保持されます。  
  
7.  同期方法を選択します。 直ちに同期すること、またはスクリプトを生成してファイルに保存することができます。 既定では、.xmla 拡張子の付いたファイルが保存され、Documents フォルダーに格納されます。  
  
8.  **[完了]** をクリックして同期をとります。 **[ウィザードの完了]** ページでオプションを確認したら、もう一度 **[完了]** をクリックします。  
  
## <a name="next-steps"></a>次の手順  
 ロールまたはロールのメンバーシップを同期しなかった場合は、この段階で、同期先データベースでユーザー アクセス権を指定してください。  
  
## <a name="see-also"></a>参照  
 [Synchronize 要素 (XMLA)](https://docs.microsoft.com/bi-reference/xmla/xml-elements-commands/synchronize-element-xmla)   
 [XMLA を使用したモデル ソリューションの配置](deploy-model-solutions-using-xmla.md)   
 [配置ウィザードを使用したモデル ソリューションの配置](deploy-model-solutions-using-the-deployment-wizard.md)  
  
  
