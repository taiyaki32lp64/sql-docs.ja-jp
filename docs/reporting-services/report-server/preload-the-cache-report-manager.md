---
title: キャッシュを事前に読み込む (SSRS)| Microsoft Docs
ms.date: 05/14/2019
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: report-server
ms.topic: conceptual
helpviewer_keywords:
- cache [Reporting Services]
- preloading cache
ms.assetid: 152a1051-8aa5-4c01-bc85-f8be8971b0cd
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 6b2be1e020354f47aa21dc83f17ff6169bcf2d72
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MTE75
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "66174995"
---
# <a name="preload-the-cache"></a>キャッシュを事前に読み込む  
  共有データセットのキャッシュ更新計画を作成することによって、共有データセットのキャッシュを事前に読み込むことができます。  
  
 レポートのキャッシュを事前に読み込むには 2 つの方法があります。  
  
1.  レポートのキャッシュ更新計画を作成します。 これは推奨される方法です。  
  
2.  データ ドリブン サブスクリプションを使用して、パラメーター化されたレポートのインスタンスをキャッシュに事前に読み込みます。 これは、 [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] より前のバージョンの [!INCLUDE[ssKilimanjaro](../../includes/sskilimanjaro-md.md)]でキャッシュを事前に読み込む唯一の方法でした。 詳細については、「 [レポートのキャッシュ (SSRS)](../../reporting-services/report-server/caching-reports-ssrs.md)でキャッシュを事前に読み込む唯一の方法でした。  
  
 レポートまたは共有データセットをキャッシュするには、次の条件を満たしている必要があります。  
  
-   共有データセットまたはレポートでキャッシュが有効になっている。  
  
-   共有データセットまたはレポートの共有データ ソースで、保存済みの資格情報を使用するか、または資格情報を使用しないように構成されている。  
  
-   [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] エージェント サービスが実行されている。  
  
## <a name="to-preload-the-cache-by-creating-a-cache-refresh-plan"></a>キャッシュ更新計画を作成してキャッシュを事前に読み込むには  
  
1. [レポート サーバーの Web ポータル](../../reporting-services/web-portal-ssrs-native-mode.md "レポート サーバーの Web ポータル")を起動します。  
  
2. ホーム画面から **[参照]** を選択し、フォルダー階層を移動してキャッシュする項目を探します。  
  
3. 項目の右上隅にある省略記号を選択した後、ドロップダウン メニューから **[管理]** を選択します。  
  
4. 左側にある垂直方向のメニューで、 **[キャッシュ]** タブを選択します。  
  
5. データセットのキャッシュを有効にするには、 **[このデータセットのコピーをキャッシュして、利用可能なときにはそれを使用する]** ラジオ ボタンを選択します。 そうすると、その下に **[キャッシュの有効期限]** セクションが表示されます。 次のラジオ ボタンのいずれかを選択します。

    - **[Cache expires after x minutes]\(x 分後にキャッシュの有効期限が切れる\)** (x に望む分数を入力します)。
    - **[スケジュールに従ってキャッシュの有効期限が切れる]** 。  Reporting Services には、レポートの配信に関する処理、コンテンツの整合性、パフォーマンスを制御するのに役立つ、共有スケジュールとレポート固有スケジュールが用意されています。 詳細については、「[Create, Modify, and Delete Schedules (スケジュールを作成、変更、および削除する)](../../reporting-services/subscriptions/create-modify-and-delete-schedules.md "スケジュールを作成、変更、および削除する")」をご覧ください。 このキャッシュの有効期限に関しては、スケジュールの作成方法についていくつかのオプションがあります。スケジューリングに関する次の 2 つの選択肢のどちらかを選択してください。  
      - **[共有スケジュール]** ラジオ ボタン。その後 **[共有スケジュールを選択してください]** ドロップダウン テキスト ボックスからスケジュールを選択してください。 詳細については、「[スケジュール](../../reporting-services/subscriptions/schedules.md "スケジュール")」をご覧ください。  
      - **[レポート固有のスケジュール]** ラジオ ボタン。"*スケジュールの詳細*" ページを表示する必要がある場合は、その後 **[スケジュールの編集]** リンクを選択します。  

         ![Web ポータルのデータセット用キャッシュ有効期限のスケジュールの詳細ページ](../../reporting-services/report-server/media/preload-the-cache/web-portal-dataset-cache-schedule-details.png "データセット用キャッシュのスケジュールの詳細ページ")

          このページでは以下を選択できます。
         - スケジュールの種類:
           - **[時間]** - 次の間隔でスケジュールを実行する: 時間と分と、開始時刻を指定します。
           - **[日]** - 次の 3 つの選択肢のいずれかを選択します。  
              - **[曜日を指定]** : (日、月、火、水、木、金、土)。
              - **[すべての平日]**
              - **[次の日間隔で繰り返す]** - 数値を指定します。  
           - **[週]** - 次の 2 つの項目の両方を指定します。
              - **[次の週間隔で繰り返す]** - 数値を指定します。  
              - **[On days]\(曜日\)** - 実行する曜日を選択します。  
           - **[月]** - 月を選択します。次の選択肢があります。
              - **[月の週]** 、  
                 - ドロップダウン ボックスから (第 1、第 2、第 3、第 4、または最終) を選択します。  
                 - **[On day of the week]\(週の曜日\)** で実行します。 1 つ以上のチェック ボックスをオンにします (日、月、火、水、木、金、土)。  
                 - **[次の暦日に実行する]** - コンマで区切った月の実際の日付、ダッシュで区切った日付の範囲、または両方の組み合わせを入力します (例: 1,3-5)。  
           - **[一度だけ]** - 一度だけ発生します。  
         - **[開始時刻]** - スケジュールを開始する時刻。  
         - **[開始日および終了日]** - スケジュールの開始日と、必要に応じて終了日を指定します。
         - **[適用]** を選択してスケジュールを保存します。  
           > [!NOTE]
           > アイテムでキャッシュが有効化されていない場合は、キャッシュを有効化するように求めるメッセージが表示されます。 キャッシュを有効にするには、 **[OK]** を選択します。  

         - **[キャッシュ更新計画の作成]** を選択してキャッシュ計画を作成/保存します。  
         **[キャッシュ更新計画]** ページが画面に表示されます。 ここでは、次の操作を実行できます。
           - 新しいキャッシュ更新計画を追加します。
           - 既存の計画から新しいキャッシュ更新計画を作成します。
           - キャッシュ更新計画のページを更新します。
           - 計画を削除します。
           - 名前で計画を検索します。

         まだキャッシュ更新計画を保存していない場合、リストは空になり、[追加] の選択肢が利用可能な唯一のオプションとなります。 **[+ 新しいキャッシュ更新計画]** を選択して新しく追加すると、 **[新しいキャッシュ更新計画]** ページが表示されます。  
           - 最初のテキスト ボックスに **[説明]** を入力して、更新計画の名前を付けます。  
           - **[次のスケジュールに従ってキャッシュを更新します]** で次のラジオ ボタンのいずれかを選択します  
             - **[共有スケジュール]** - 隣にあるドロップダウン ボックスから共有スケジュールを選択します。 
             - **[レポート固有のスケジュール]** - 上記の手順 2.2 のようにスケジュールを編集します。"*スケジュールの詳細*" ページを表示する必要がある場合は、 **[スケジュールの編集]** リンクを選択します。 
             - 追加する場合に計画を保存するには **[キャッシュ更新計画の作成]** を、計画を編集する場合は **[適用]** を選択します。  
      更新された **[キャッシュ更新計画]** ページに戻ります。
  
## <a name="to-preload-the-cache-with-a-user-specific-report-by-using-a-data-driven-subscription"></a>ユーザー固有のレポートでデータ ドリブン サブスクリプションを使用してキャッシュを事前に読み込むには

1. [レポート サーバーの Web ポータル](../../reporting-services/web-portal-ssrs-native-mode.md "レポート サーバーの Web ポータル")を起動します。  
2. ホーム画面から **[参照]** を選択し、フォルダー階層を移動してサブスクライブするレポートを探します。  
3. レポートを右クリックして、ドロップダウン メニューから **[サブスクライブ]** を選択します。 **[新しいサブスクリプション]** ページが表示されます。  
4. **[説明]** テキスト ボックスに、サブスクリプションの説明を入力します。  
5. **[サブスクリプションの種類]** ラジオ ボタンには 2 つのオプションが表示されます。  
   - **[標準サブスクリプション]** - 1 つのレポートを生成して配信する場合
   - **[データ ドリブン サブスクリプション]** - データセット内の行ごとに 1 つのレポートを生成して配信する場合。 キャッシュを事前に読み込むには、このオプションを選択します。
6. **[スケジュール]** セクションで、次のラジオ ボタンのいずれかを選択します。
   - **[共有スケジュール]** - ドロップダウン ボックスから共有スケジュールを選択します。  
   - **[レポート固有のスケジュール]** - 上記の手順 2.2 のようにスケジュールを編集します。"*スケジュールの詳細*" ページを表示する必要がある場合は、 **[スケジュールの編集]** リンクを選択します。  
7. **[転送先]** セクションでは、ドロップダウン ボックスに次の選択肢が表示されます。
    - **[Windows ファイル共有]**
    - **[電子メール]**
    - **[NULL 配信プロバイダー]** - このタスクでは、Null 配信プロバイダーを選択します。  
8. **[データセット]** セクションで、 **[データセットの編集]** ボタンを選択することでこのレポートのサブスクリプションのデータセットを編集または作成します。  
9. **[データ ソース]** セクションの **[データセットの編集]** ページで、レポート パラメーター値と配信オプションを含むデータ ソースを選択します。 選択肢は次のとおりです。  
   - **[共有データ ソース]** - 省略記号を選択し、*Shared Data Source* フォルダーから共有データ ソースを選択します。
   - **[カスタム データ ソース]** - ほとんどの場合。 このオプションを選択する必要があります (自分か他の誰かが、以下の手順を既に完了してこれを共有データ ソースとして作成していない限り)。  
     - サブスクライバー データが格納されているデータ ソースへのアクセスに使用する接続の種類、接続文字列、および資格情報を指定します。 次に、Subscribers という名前の SQL Server データベースへの接続に使用する接続文字列の例を示します。  
  
   ```T-SQL
   data source=<servername>;initial catalog=Subscribers  
   ```
  
10. **[クエリ]** セクションで、必要なサブスクライバー データを取得するクエリを指定します。  例:  
  
    ```T-SQL  
    Select * from RptSubscribers  
    ```
  
    必要に応じて、処理に時間のかかるクエリのタイムアウト値を増やします。  
  
11. **[検証]** を選択します。 クエリを検証してから続行する必要があります。 **[検証が成功しました]** というメッセージが表示されると、 **[検証]** ボタンの下にデータセット フィールドの一覧が表示されます。 **[適用]** を選択して、カスタム データ ソースを作成します。  
  
12. **[新しいサブスクリプション]** ページに戻ります。  **[レポート パラメーター]** セクションで、表示されているレポート パラメーターがあればレポート パラメーターの値を指定します。  

13. **[サブスクリプションの作成]** を選択します。  
  
14. 新しいデータ ドリブン サブスクリプションと共に **[サブスクリプション]** ページが表示されます。 このページでは、準備が整ったときにサブスクリプションを有効にすることができます。それには、その左側にあるチェック ボックスを選択し、 **[有効にする]** ボタンを選択します。 ![サブスクリプション ページの [有効にする] ボタン](../../reporting-services/report-server/media/preload-the-cache/subscriptions-page-enable-button.png "サブスクリプション ページ上の [有効にする] ボタン")

15. サブスクリプションをいつ処理するかを指定します。 **[レポート サーバーでのレポート データの更新時]** は選択しないでください。 この設定はスナップショットにのみ使用します。 既存のスケジュールを使用する場合は、 **[共有スケジュールで実行]** を選択してください。  
  
     または、カスタム スケジュールを作成する場合は、 **[このサブスクリプション用に作成されたスケジュールで実行]** を選択してから、 **[次へ]** を選択します。 スケジュールを構成した後、 **[完了]** を選択します。  
  
    > [!NOTE]  
    > サブスクライバーが最新のレポートを受け取るには、構成するスケジュールが、サブスクライバーに対して定義したレポート配信スケジュールと一致する必要があります。 詳細については、[レポート サーバーの Web ポータル](../../reporting-services/web-portal-ssrs-native-mode.md  "レポート サーバーの Web ポータル")に関するページをご覧ください。  
  
16. 以下のように、レポートの実行オプションを構成します。 レポート ページで、 **[プロパティ]** タブを選択します。  
  
17. 左フレームの **[実行]** タブを選択します。  
  
18. このページで、 **[最新データを使用して、このレポートを表示する]** を選択します。  
  
19. 次の 2 つのキャッシュ オプションのいずれかを選択し、以下のように有効期限を構成します。  
  
    - キャッシュされたコピーの有効期限が特定の期間後に切れるようにするには、**レポートの一時コピーをキャッシュします。レポートのコピーの有効期限は数分後に切れます** をクリックします。 レポートの有効期限を分単位で入力します。  
  
    - キャッシュされたコピーの有効期限がスケジュールに基づいて切れるようにするには、 **[レポートの一時コピーをキャッシュします。次のスケジュールでレポートのコピーの有効期限は切れます。]** をクリックします。 **[構成]** を選択するか、共有スケジュールを選択して、レポートの有効期限に関するスケジュールを設定します。  
  
20. **[適用]** を選択します。
  
## <a name="see-also"></a>参照  

 [データ ドリブン サブスクリプション](../../reporting-services/subscriptions/data-driven-subscriptions.md)  
 [データ ドリブン サブスクリプションの作成 &#40;SSRS チュートリアル&#41;](../../reporting-services/create-a-data-driven-subscription-ssrs-tutorial.md)  
 [パフォーマンス、スナップショット、キャッシュ &#40;Reporting Services&#41;](../../reporting-services/report-server/performance-snapshots-caching-reporting-services.md)  
 [レポート処理プロパティの設定](../../reporting-services/report-server/set-report-processing-properties.md)  
 [レポートのキャッシュ (SSRS)](../../reporting-services/report-server/caching-reports-ssrs.md)  
 [共有データセットの操作](../../reporting-services/work-with-shared-datasets-web-portal.md)  
  
