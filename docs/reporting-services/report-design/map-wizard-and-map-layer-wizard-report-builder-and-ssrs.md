---
title: マップ ウィザードおよびマップ レイヤー ウィザードのページ (レポート ビルダーおよび SSRS) | Microsoft Docs
ms.date: 03/14/2017
ms.prod: reporting-services
ms.prod_service: reporting-services-native
ms.technology: report-design
ms.topic: reference
f1_keywords:
- sql13.rtp.rptdesigner.mapandlayerwizard.f1
- "10542"
- MICROSOFT.REPORTDESIGNER.MAPLAYER.NAME
ms.assetid: 48cbe18b-1290-4107-8a1c-ec6acd71f73b
author: maggiesMSFT
ms.author: maggies
ms.openlocfilehash: 7acbf53f3a77252d00d3ad5de65ffb221afe3b7a
ms.sourcegitcommit: 3026c22b7fba19059a769ea5f367c4f51efaf286
ms.translationtype: MTE75
ms.contentlocale: ja-JP
ms.lasthandoff: 06/15/2019
ms.locfileid: "66499876"
---
# <a name="map-wizard-and-map-layer-wizard-report-builder-and-ssrs"></a>マップ ウィザードおよびマップ レイヤー ウィザードのページ (レポート ビルダーおよび SSRS)
 [!INCLUDE[ssRSnoversion_md](../../includes/ssrsnoversion-md.md)] の改ページ調整されたレポートでは、マップ ウィザードおよびマップ レイヤー ウィザードは、マップの作成、マップ レイヤーの追加、既存のレイヤーのマップ レイヤー オプションの変更などのタスクを自動化します。  
  
 マップをレポートに追加したりマップ レイヤーをマップに追加したりするには、次の情報を事前に用意します。  
  
-   **空間データ ソース :** 空間データを提供するソースの場所またはソースへの接続です。たとえば、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] インスタンスの名前と空間データを格納しているデータベース、または Environmental Systems Research Institute, Inc. (ESRI) シェープファイルの空間データを指定できます。  
  
-   **空間データとして提供しているサードパーティのサイト。** 位置を指定する座標セットを格納している空間データ ソースのフィールドです。  
  
-   **分析データ :** さまざまなマップ表示を行うために使用する分析データ (たとえば、店舗の年間売上) です。  
  
-   **対応フィールド :** 空間データと分析データのリレーションシップを定義する対応フィールドです (たとえば、各市区町村を一意に識別するための地域と市区町村の名前)。  
  
 次の各セクションでは、マップ ウィザードおよびマップ レイヤー ウィザードのオプションについて説明します。  
  
-   最初にレポート ビルダーを開いたときに、デザイン画面の中央にある **[マップ]** ウィザード アイコンをクリックします。  
  
-   **[挿入]** タブの **[マップ]** をクリックし、次に **[マップ ウィザード]** をクリックします。  
  
 マップ レイヤー ウィザードを開くには、次の操作を行います。  
  
-   マップをクリックしてマップ ペインを表示し、ツール バーの **[レイヤーの新規作成ウィザード]** をクリックします。  
  
 ウィザード ページのタイトルをクリックすると、対応するヘルプ コンテンツが表示されます。 表示されるページは、選択したマップの種類、空間データのソース、および分析データのソースによって異なります。  
  
1.  [[空間データのソースを選択]](#SpatialDataSource): マップ ギャラリーの空間データ、Environmental Systems Research Institute, Inc. (ESRI) シェープファイル、または [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] リレーショナル データベースの空間データを指定できます。  
  
    -   [空間データとは](#SpatialData)  
  
    -   [マップ ギャラリーとは](#MapGallery)  
  
    -   [ESRI シェープファイルとは](#Shapefile)  
  
    -   [ESRI シェープファイルを取得できる場所](#GetShapefiles)  
  
    -   [SQL Server 空間クエリとは](#SqlServerSpatial)  
  
2.  [[空間データとマップ ビューのオプションを選択]](#MapView): マップ ビューとマップの解像度を設定し、空間データをレポートに埋め込むかどうか、および [!INCLUDE[msCoName](../../includes/msconame-md.md)] Bing のマップ タイルのタイル背景を含めるかどうかを指定します。  
  
    -   [マップ ビューまたはビューポートとは](#Viewport)  
  
    -   [マップの解像度および最適化とは](#Resolution)  
  
    -   [空間データの埋め込みとは](#Embed)  
  
    -   [Bing のマップ タイルの背景とは](#Tiles)  
  
3.  [[マップの視覚エフェクトの選択]](#Visualization): 作成するマップの種類を選択します。  
  
    -   [基本マップ、バブル マップ、および分析マップの違い](#MapType)  
  
    -   [マップの視覚エフェクトの選択] : 多角形  
  
    -   [マップの視覚エフェクトの選択] : 線  
  
    -   [マップの視覚エフェクトの選択] : ポイント  
  
4.  [データ ソースへの接続の選択]、[マップの視覚エフェクトの選択]: ポイント。 マップに表示する分析データが含まれている外部データ ソースへのデータ ソース接続を選択するか作成します。  
  
5.  [クエリのデザイン]。 分析データを指定するクエリを作成します。  
  
6.  [[分析データセットの選択]](#AnalyticalData): 分析データのデータ ソースを指定します。  
  
    -   [空間データと分析データの違い](#Diff)  
  
7.  [[空間データと分析データの一致フィールドを指定]](#SpecifyMatchFields): 空間データと分析データの間のリレーションシップを作成して、データに基づいてマップ要素の表示を変化させることができるようにします。  
  
    -   [対応フィールドとは](#MatchFields)  
  
8.  [[配色テーマとデータの視覚エフェクトを選択]](#ThemeandVisualization): マップの背景に対してデータをどのように視覚化するかを指定するには、マップ テーマ、視覚化するフィールド、および変更する要素 (色、サイズ、マーカーの種類) を指定します。  
  
    -   [テーマとは](#Theme)  
  
    -   [マップ プレビューにおける凡例とスケールの役割](#Legends)  
  
    -   [ルールとは](#Rules)  
  
 マップまたはマップ レイヤーを追加してレポートをプレビューした後、ウィザードで設定したマップ オプションおよびマップ レイヤー オプションを変更できます。 詳細については、「[マップまたはマップ レイヤーのデータと表示のカスタマイズ (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/customize-the-data-and-display-of-a-map-or-map-layer-report-builder-and-ssrs.md)」を参照してください。  
  
 マップに関する詳細については、「 [マップ (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/maps-report-builder-and-ssrs.md)をクリックします。 マップをレポートに追加する手順については、「[チュートリアル: マップ レポート (レポート ビルダー)](../../reporting-services/tutorial-map-report-report-builder.md)」を参照してください。  
  
##  <a name="SpatialDataSource"></a> [空間データのソースを選択]  
 このページでは、使用する空間データ ソースと空間データを指定します。 空間データのソースとして、マップ ギャラリー、ESRI シェープファイル、または [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 以降のバージョンのデータベースの [!INCLUDE[ssKatmai](../../includes/sskatmai-md.md)] 空間データを指定するデータセット クエリを使用できます。  
  
 それぞれのレイヤーの空間データのソースは同じソースであっても異なるソースであってもかまいませんが、レイヤーを追加するたびにソースを指定する必要があります。 空間データのソースがマップ ギャラリーまたは ESRI シェープファイルの場合、空間データ ソースは独立したレポート アイテムではありません。 空間データ ソースはレポート データ ペインに表示されません。  
  
###  <a name="SpatialData"></a> 空間データとは  
 空間データには、地理的要素または幾何学的要素を定義する座標が格納されています。 マップ内で、空間データは *マップ要素*を定義します。マップ要素には、領域または形状を定義する多角形、ルートまたはパスを定義する線、およびマーカーまたは画鋲を定義するポイントがあります。 空間データは、バイナリ形式でデータ ソースに格納され、座標セットとして指定されます。 たとえば、ポイントは XY 座標 (X Y)、線は 2 つの座標セット ((X1 Y1), (X2 Y2))、多角形は最初の最後の座標セットが同じ 4 つ以上の座標セット ((X1 Y1), (X2 Y2), (X3 Y3), (X1 Y1)) で表されます。  
  
 詳細については、使用する空間データの種類に関するドキュメントを参照してください。  
  
###  <a name="MapGallery"></a> What is the map gallery?  
 マップ ギャラリーには、レポート作成環境のマップ ギャラリー フォルダー内にあるレポートで使用されているマップが含まれます。 ギャラリーのマップを使用することで、マップを簡単にレポートに追加できます。 ギャラリーにあらかじめ定義されているマップは、マップ プロバイダーによって提供されます。  
  
> [!NOTE]  
>  この [!INCLUDE[ssRSnoversion](../../includes/ssrsnoversion-md.md)] マッピング機能は、米国の国勢調査局 ([https://www.census.gov/](https://www.census.gov/)) から無料で入手できます。 TIGER/Line シェープファイルは、Census MAF/TIGER データベースからの選択された地理的情報および地図情報の抜粋です。 TIGER/Line シェープファイルは、米国の国勢調査局から無料で入手できます。 TIGER/Line シェープファイルに関する詳細情報については、「[TIGER/Line Shapefiles and TIGER/Line Files Technical Documentation (TIGER/Line シェープファイルと TIGER/Line ファイルに関する技術ドキュメント)](https://www.census.gov/programs-surveys/geography/technical-documentation/complete-technical-documentation/tiger-geo-line.html)」をご覧ください。 TIGER/Line シェープファイル内の境界情報は、統計データの収集および集計を唯一の目的としています。統計目的のための表現および表示は、法的管轄機関、所有権、または権利の付与の決定となるものではなく、また法的な土地の記載でもありません。 Census TIGER および TIGER/Line は、米国の国勢調査局の登録商標です。  
  
 マップ ギャラリーを拡張するには、マップ ギャラリー ディレクトリのレポートを追加または削除したり、マップを整理するためのフォルダーを追加したりします。 詳細については、「 [マップ (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/maps-report-builder-and-ssrs.md)をクリックします。  
  
###  <a name="Shapefile"></a> What is an ESRI shapefile?  
 ESRI シェープファイルは、Environmental Systems Research Institute, Inc. (ESRI) シェープファイル空間データ形式に準拠するデータが格納されたファイルのセットです。 通常、ファイルのセットには、空間データが格納されている *\<filename>* .shp ファイルと、サポート ファイルの *\<filename>* .dbf が含まれます。  
  
 シェープファイルを空間データ ソースとして指定し、このファイルがローカル コンピューター上にある場合は、空間データが自動的にレポートに埋め込まれます。 ESRI ファイルの空間データを動的に使用するには、次の操作を行う必要があります。  
  
 レポート ビルダーで、.shp ファイルと .dbf ファイルの両方をレポート サーバー上の同じフォルダーにアップロードし、空間データ ソースとして .shp ファイルにリンクします。  
  
 [!INCLUDE[ssBIDevStudioFull](../../includes/ssbidevstudiofull-md.md)]のレポート デザイナーで、.shp ファイルと .dbf ファイルの両方をレポート プロジェクトに追加し、空間データ ソースとして .shp ファイルの名前を指定します。  
  
###  <a name="GetShapefiles"></a> ESRI シェープファイルを取得できる場所  
 ESRI シェープファイルは Web 上で入手できます。 詳細については、「 [マップに使用する ESRI シェープファイルの検索](https://go.microsoft.com/fwlink/?linkid=178814)」を参照してください。  
  
###  <a name="SqlServerSpatial"></a> SQL Server 空間クエリとは  
 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] 空間クエリは、 [!INCLUDE[ssNoVersion](../../includes/ssnoversion-md.md)] リレーショナル データベースの SQLGeometry データ型または SQLGeography データ型のデータを指定するデータセット クエリです。  
  
> [!NOTE]  
>  ウィザードでデータ ソースを定義するときに [クエリのデザイン] ページに表示されるクエリ デザイナーは、接続先のデータ ソースの種類によって異なります。 詳細については、次を参照してください。[クエリ デザイン ツール&#40;SSRS&#41;](../report-data/query-design-tools-ssrs.md)します。  
  
 クエリ デザイナーでクエリを実行すると、空間データをテキストとして含む列が結果セットに表示されます。 たとえば、ある行には、単独のポイントである空間データが含まれ、次の行には、ポイントのセットを定義する空間データが含まれます。 それぞれの行が 1 つのマップ要素となります。 それぞれのマップ要素の表示は、分割不可能な単位として変更することができます。  
  
 詳細については、「 [空間データ型](../../relational-databases/spatial/spatial-data-types-overview.md)」を参照してください。  
  
##  <a name="MapView"></a> [空間データとマップ ビューのオプションを選択]  
 このページでは、次のオプションを設定できます。  
  
-   ウィザードの前のページで選択した空間データのビューの中心およびズーム レベルを設定します。 設定したビューは、マップ全体に適用されます。  
  
-   マップの解像度を設定します。  
  
-   空間データをレポートに埋め込むかどうかを指定します。  
  
-   埋め込みデータに対しては、すべてのデータと現在のビュー内のデータのみのどちらを含めるかを指定します。  
  
-   [!INCLUDE[msCoName](../../includes/msconame-md.md)] Bing のマップ タイルの背景を含めるかどうかを指定します。  
  
###  <a name="Viewport"></a> マップ ビューまたはビューポートとは  
 マップ ビューポートは、レポートのすべてのレイヤーについて、表示するマップ領域を定義します。  
  
 既定では、カラー スケールと距離スケールはビューポートの内側に表示され、マップの凡例はビューポートの外側に表示されます。 ビューポートのこれらのオプションは、ウィザードを完了した後も変更できます。  
  
###  <a name="Resolution"></a> マップの解像度および最適化とは  
 線または多角形を表す空間データの解像度を変更することは、描画するマップの精細度を指定することになります。 たとえば、領域の航空写真ビューの場合、地球表面の数百メートル単位までの精細度が必要か、1 マイル単位の解像度で十分かを検討します。  
  
 空間データをレポートに含める場合、解像度が高くなるほど、その解像度で細部を描画するのに必要な要素の数が増えます。 空間データをレポートに含めない場合、解像度が高くなるほど、レポートを表示するたびにレポート プロセッサがその解像度でのマップの線を計算するのに必要となる時間が増加します。  
  
 解像度を低くした場合、レポート プロセッサは、マップ要素の描画に必要なポイントの数を減らすアルゴリズムを適用します。 解像度が低くなるほど、マップ要素の表示に必要なデータが少なくて済み、表示パフォーマンスが上がります。  
  
 スライダーを調整すると、ウィザード ペインのプレビュー データが更新されるので、その効果がわかります。 マップをレポートに追加した後は、マップ ビューポートのオプションを変更することで、この値を調整できます。  
  
###  <a name="Embed"></a> 空間データの埋め込みとは  
 マップ要素または Bing のマップ タイルをレポートに埋め込むと、空間データがレポート定義に格納されます。  
  
 マップを含んだレポートでは、レポートの処理時またはデザイン時に動的に取得されレポート定義に埋め込まれる Bing のマップ タイルまたは空間データを使用できます。 マップ要素が埋め込まれるとレポート定義のサイズが著しく増加しますが、レポート内でマップを表示するのに要する時間が短縮されます。 動的なマップ要素の場合はレポート定義のサイズが小さくなりますが、マップを処理して表示するのに要する時間が増加します。  
  
 優れたレポート デザインを実現するには、静的なマップ データまたは動的なマップ データのトレードオフを評価し、環境に合わせてバランスを調整します。 通常、データ量が増えることは、レポート サーバー上でレポート定義およびコンパイル後のレポートを格納するのにより多くの領域が必要になり、処理時間が長くなることを意味します。 空間データはトリミングし、他のレポート データも制限して、必要なデータのみをレポートに含めるようにすることをお勧めします。  
  
###  <a name="Tiles"></a> Bing のマップ タイルの背景とは  
 マップに地理的イメージの背景を追加するには、Bing のマップ タイルの背景オプションを選択します。 このウィザード ページで指定したマップ領域および解像度に対応するタイルが、レポート プロセッサによって、Bing マップ Web サービスからダウンロードされます。 次のいずれかのタイルの種類を指定できます。  
  
-   **[道路] :** 道路地図スタイルを白い背景色で表示します。  
  
-   **[航空写真] :** 航空写真ビューのみを表示します。 このモードでは、テキストは表示されません。  
  
-   **[ハイブリッド] :** **[道路]** ビューと **[航空写真]** ビューの組み合わせを表示します。  
  
 タイルの詳細については、「 [Bing Maps のタイル システム](https://go.microsoft.com/fwlink/?LinkId=147315)」を参照してください。 レポート内での Bing のマップ タイルの使用については、「 [追加使用条件](https://go.microsoft.com/fwlink/?LinkId=151371)をクリックします。  
  
 デザイン ビューでタイル背景を表示するには、インターネットにアクセスできる環境が必要です。 レポート サーバー上のレポートのプレビューにタイル背景を表示するには、Bing のマップ タイルをサポートするようにレポート サーバーが構成されている必要があります。 詳細については、「 [レポートのトラブルシューティング: マップ レポート (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/troubleshoot-reports-map-reports-report-builder-and-ssrs.md) ビューと [マップ レポートの計画](../../reporting-services/report-design/plan-a-map-report-report-builder-and-ssrs.md)をクリックします。  
  
 タイル レイヤーをカスタマイズするためのその他の方法については、「[マップまたはマップ レイヤーの追加、変更、または削除 (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/add-change-or-delete-a-map-or-map-layer-report-builder-and-ssrs.md)」を参照してください。  
  
##  <a name="Visualization"></a> [マップの視覚エフェクトの選択]  
 このページでは、レポートに追加するマップまたはマップ レイヤーの種類を選択します。 ウィザードを初めて実行すると、マップと最初のマップ レイヤーがレポートに追加されます。 1 つのマップに複数のマップ レイヤーを追加できます。 それぞれのマップ レイヤーには、特定の種類の空間データ (多角形、線、またはポイント) が表示されます。  
  
 マップの目的と使用できるデータに合わせてマップの種類を選択します。  
  
###  <a name="MapType"></a> 基本マップ、バブル マップ、および分析マップの違い  
 **[基本マップ]** には、場所のみが表示されます。 マップ上の領域の色に濃淡を付けることができますが、色は分析データ値を表しません。  
  
 **[バブル マップ]** には、たとえば店舗売上のような単一の分析データの集計をバブル サイズとする相対値が示されます。 多角形またはポイントのどちらに対してもバブル マップを作成できます。 多角形の場合は、多角形の中心点のプロパティを設定します。ポイントの場合は、マーカーのプロパティを設定します。  
  
 **[分析マップ]** には、それぞれのマップ要素の 1 つまたは複数の分析データの集計の相対値が示されます。 たとえば、店舗売上をマーカーのサイズで、製品カテゴリの利益率をマーカーの色で、販売が好調な製品をマーカーの種類で表示することができます。  
  
 詳細については、「 [マップ レポートの計画 (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/plan-a-map-report-report-builder-and-ssrs.md)をクリックします。  
  
##  <a name="AnalyticalData"></a> [分析データセットの選択]  
 このページでは、このマップ レイヤーに表示する分析データをどこから取得するかを指定します。  
  
 マップ背景にレポート データまたは任意の分析データを表示するには、データの場所と、データをどのように空間データに関連付けるかを指定する必要があります。 データのソースとして、既存のレポート データセットか、または作成するクエリの対象とする新しいデータセットを選択できます。 空間データを含む ESRI シェープファイルに既存の分析データが含まれている場合もあります。  
  
###  <a name="Diff"></a> 空間データと分析データの違い  
 空間データは、ポイント、線、および多角形を指定する座標のセットから構成されます。 マップ要素は、空間データに基づきます。  
  
 分析データは、数値データまたはカテゴリ データで、マップの外観を変更するために使用できます。 分析データは、レポート データセットから取得できます。また、分析データは、マップ ギャラリーのマップまたは ESRI シェープファイルの空間データに含まれている場合があります。  
  
##  <a name="SpecifyMatchFields"></a> 対応フィールドの指定  
 このページでは、空間データと分析データの間のリレーションシップを作成します。  
  
###  <a name="MatchFields"></a> 対応フィールドとは  
 対応フィールドを使用することで、レポート プロセッサが分析データと空間データの間のリレーションシップを作成することが可能になります。 対応フィールドは、分析データ内の一意な値を指定します。 たとえば、データ内で店舗名が一意でない可能性がある場合は、市区町村と店舗名の両方を指定します。  
  
##  <a name="ThemeandVisualization"></a> [配色テーマとデータの視覚エフェクトを選択]  
 このページでは、マップの背景に対してデータをどのように視覚化するか、マップ テーマ、視覚化するフィールド、および変更する要素 (色、サイズ、マーカーの種類) を指定します。  
  
###  <a name="Theme"></a> テーマとは  
 選択したテーマによって、色、罫線、およびフォントの既定値が設定されます。 これらのオプションは、ウィザードを完了した後も変更できます。  
  
###  <a name="Legends"></a> マップ プレビューにおける凡例とスケールの役割  
 凡例は、マップに表示されているデータをユーザーが解釈する際に役に立ちます。 マップは、色の範囲、距離スケール、および凡例を提供します。  
  
-   **色の範囲 :** 色の範囲では、スケール付きのカラー バーが表示され、レイヤーに指定したルールに基づいて、レポート プロセッサによって決定されるデータ間隔のガイドが提供されます。  
  
-   **距離スケール :** 距離スケールは、マップ上の距離単位を示します。 距離単位は、マップの投影およびズーム レベルに基づいて自動的に決定されます。  
  
-   **凡例 :** 凡例は、マップ上の色、サイズ、マーカーの種類の意味を示します。 既定では、すべてのレイヤーのすべてのルールで、データ間隔が最初の凡例に表示されます。 マップをレポートに追加した後で、この凡例をカスタマイズしたり、凡例を追加したりできます。  
  
###  <a name="Rules"></a> ルールとは  
 ルールとは、レポート プロセッサが分析データを範囲に分類するために使用する計算です。 レイヤーごとに異なるルールを指定できます。 指定できるルールの種類は、レイヤー上の空間データの種類によって異なります。  
  
-   **多角形 :** 色ルールを指定できます。  
  
-   **多角形の中心点 :** 色ルール、サイズ ルール、およびマーカーの種類ルールを指定できます。  
  
-   **線 :** 色ルールおよび幅ルールを指定できます。  
  
-   **ポイント :** 色ルール、サイズ ルール、およびマーカーの種類ルールを指定できます。  
  
 レポート プロセッサは、ユーザーによって設定されたルールを適用し、凡例に表示するアイテムの一覧を自動的に決定します。 既定では、すべてのレイヤーのすべてのルールの結果が最初の凡例に表示されます。 これらのオプションは、ウィザードを完了した後も変更できます。 詳細については、「 [ルールおよび分析データを使用した多角形、線、およびポイントの表示の変更 &#40;レポート ビルダーおよび SSRS&#41;](../../reporting-services/report-design/vary-polygon-line-and-point-display-by-rules-and-analytical-data.md)」を参照してください。  
  
## <a name="see-also"></a>参照  
 [レポートのトラブルシューティング: マップ レポート (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/troubleshoot-reports-map-reports-report-builder-and-ssrs.md)   
 [マップ レポートの計画 (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/plan-a-map-report-report-builder-and-ssrs.md)   
 [マップ (レポート ビルダーおよび SSRS)](../../reporting-services/report-design/maps-report-builder-and-ssrs.md)  
  
  
